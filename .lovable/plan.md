
# ะะปะฐะฝ: ะะตะฐะปัะฝะฐั ะฐะฝะฐะปะธัะธะบะฐ + ะฃะปัััะตะฝะฝะพะต ะผะตะฝั ัััะดะธะนะฝัั ะดะตะนััะฒะธะน

## ๐ ะะฑะทะพั

1. **ะะตะฐะปัะฝะฐั ะฐะฝะฐะปะธัะธะบะฐ** โ ะธะฝัะตะณัะฐัะธั `useAdminStats` ะฒ `StatsHighlightBanner`
2. **ะฃะปัััะตะฝะฝะพะต ะผะตะฝั ะฟะพัะปะต ะณะตะฝะตัะฐัะธะธ** โ ะบะปััะตะฒัะต ัััะดะธะนะฝัะต ะฟัะฝะบัั ั ะฟัะฐะฒะธะปัะฝัะผ ะณะตะนัะธะฝะณะพะผ

---

## 1. ะะตะฐะปัะฝะฐั ะฐะฝะฐะปะธัะธะบะฐ ะฝะฐ ะณะปะฐะฒะฝะพะน

### ะขะตะบััะตะต ัะพััะพัะฝะธะต
`StatsHighlightBanner.tsx` ะธัะฟะพะปัะทัะตั ะทะฐัะฐัะดะบะพะถะตะฝะฝัะต ะทะฝะฐัะตะฝะธั:
- "12K+ ะขัะตะบะพะฒ", "2.5K+ ะะฒัะพัะพะฒ", "50K+ ะะตะฝะตัะฐัะธะน", "100K+ ะัะพัะปััะธะฒะฐะฝะธะน"

### ะะตัะตะฝะธะต
ะกะพะทะดะฐัั ะฝะพะฒัะน ััะบ `usePlatformStats` (ะฟัะฑะปะธัะฝะฐั ะฒะตััะธั useAdminStats):

```
src/hooks/usePlatformStats.ts
โโโ ะะฐะฟัะพัั ะบ tracks (count), profiles (count), generation_tasks (count)
โโโ ะะณัะตะณะฐัะธั play_count ะธะท tracks
โโโ ะััะธัะพะฒะฐะฝะธะต 5 ะผะธะฝัั
โโโ ะคะพัะผะฐัะธัะพะฒะฐะฝะธะต: "12.5K+", "2.3K+"
```

### ะะทะผะตะฝะตะฝะธั ะฒ StatsHighlightBanner
- ะะผะฟะพัั `usePlatformStats`
- ะัะพะฑัะฐะถะตะฝะธะต ัะตะฐะปัะฝัั ะดะฐะฝะฝัั
- Skeleton ะฟัะธ ะทะฐะณััะทะบะต
- ะคะพัะผะฐัะธัะพะฒะฐะฝะธะต ัะธัะตะป (K+, M+)

---

## 2. ะฃะปัััะตะฝะฝะพะต ะผะตะฝั ัััะดะธะนะฝัั ะดะตะนััะฒะธะน

### ะขะตะบััะฐั ััััะบัััะฐ
`StudioActions.tsx` โ ะฟะพะดะผะตะฝั "ะัะบัััั ะฒ ัััะดะธะธ":
- ะัะบัััั ัััะดะธั
- ะะฐะผะตะฝะฐ ัะตะบัะธะธ
- ะกัะตะผั (2 ะดะพัะพะถะบะธ) / ะกัะตะผั (6+ ะดะพัะพะถะตะบ)

### ะะพะฒะฐั ััััะบัััะฐ ะบะปััะตะฒัั ะฟัะฝะบัะพะฒ

| ะัะฝะบั | ะฃัะปะพะฒะธะต | ะะพะดะฟะธัะบะฐ | ะัะธะผะตัะฐะฝะธะต |
|-------|---------|----------|------------|
| **ะัะบัััั ะฒ ัััะดะธะธ** | hasAudio | ะัะต | ะะตัะตัะพะด ะฒ /studio |
| **ะะฐะผะตะฝะฐ ัะตะบัะธะธ** | hasAudio | Premium | `section_replace` feature |
| **ะะฐะทะดะตะปะตะฝะธะต ะฝะฐ ััะตะผั** | hasSunoId && !hasStems | โ | ะัะบััะฒะฐะตั ะดะธะฐะปะพะณ ะฒัะฑะพัะฐ |
| โณ ะัะพััะพะน (2 ะดะพัะพะถะบะธ) | โ | Free | `stem_separation_basic` |
| โณ ะะตัะฐะปัะฝัะน (6+ ะดะพัะพะถะตะบ) | โ | Pro+ | `stem_separation_detailed` |
| **ะขัะฐะฝัะบัะธะฟัะธั ะฒ MIDI** | hasStems | Pro+ | `midi_transcription` |
| โณ ะะปั ะบะฐะถะดะพะณะพ ััะตะผะฐ | stemCount > 0 | โ | klang.io ะผะพะดะตะปั ะฟะพ ัะธะฟั ััะตะผะฐ |

### ะะพะณะธะบะฐ MIDI ััะฐะฝัะบัะธะฟัะธะธ
- **ะะบัะธะฒะฝะพ ัะพะปัะบะพ ะฟะพัะปะต ะณะตะฝะตัะฐัะธะธ ััะตะผะพะฒ**
- ะะพะดะผะตะฝั ัะพ ัะฟะธัะบะพะผ ะดะพัััะฟะฝัั ััะตะผะพะฒ
- ะะปั ะบะฐะถะดะพะณะพ ััะตะผะฐ โ ะฟะพะดัะพะดััะฐั klang.io ะผะพะดะตะปั:
  - vocals โ `vocal`
  - drums โ `drums`
  - bass โ `bass`
  - guitar โ `guitar`
  - piano โ `piano`
  - other โ `universal`

---

## 3. ะคะฐะนะปั ะดะปั ัะพะทะดะฐะฝะธั/ะผะพะดะธัะธะบะฐัะธะธ

### ะะพะฒัะต ัะฐะนะปั
| ะคะฐะนะป | ะะฟะธัะฐะฝะธะต |
|------|----------|
| `src/hooks/usePlatformStats.ts` | ะัะฑะปะธัะฝะฐั ััะฐัะธััะธะบะฐ ะฟะปะฐััะพัะผั |

### ะะพะดะธัะธะบะฐัะธะธ
| ะคะฐะนะป | ะะทะผะตะฝะตะฝะธั |
|------|-----------|
| `src/components/home/StatsHighlightBanner.tsx` | ะะฝัะตะณัะฐัะธั ัะตะฐะปัะฝัั ะดะฐะฝะฝัั |
| `src/components/track-actions/sections/StudioActions.tsx` | ะะพะฒัะต ะฟัะฝะบัั ะผะตะฝั ั ะณะตะนัะธะฝะณะพะผ |
| `src/components/track-actions/MobileTrackActionSheet.tsx` | ะะพะฑะฐะฒะธัั MIDI ััะฐะฝัะบัะธะฟัะธั |
| `src/lib/trackActionConditions.ts` | ะฃัะปะพะฒะธั ะดะปั transcribe_midi |
| `src/config/trackActionsConfig.ts` | ะฃะถะต ะตััั transcribe_midi, transcribe_notes |

---

## 4. ะะตะนัะธะฝะณ ะฟะพะดะฟะธัะพะบ

ะัะฟะพะปัะทัะตะผ ัััะตััะฒัััะธะน `useFeatureAccess`:

```typescript
// ะัะพะฒะตัะบะฐ ะดะพัััะฟะฐ
const { hasAccess: canStemDetailed } = useFeatureAccess('stem_separation_detailed');
const { hasAccess: canMidi } = useFeatureAccess('midi_transcription');
const { hasAccess: canReplace } = useFeatureAccess('section_replace');
```

ะัะธ ะพััััััะฒะธะธ ะดะพัััะฟะฐ:
- ะะพะบะฐะทัะฒะฐัั ะฟัะฝะบั ั ะทะฐะผะบะพะผ ๐
- ะะปะธะบ โ `UpgradePrompt` ั ะฝะฐะทะฒะฐะฝะธะตะผ ัะธัะธ

---

## 5. ะะพััะดะพะบ ัะตะฐะปะธะทะฐัะธะธ

```
ะญัะฐะฟ 1: ะะตะฐะปัะฝะฐั ะฐะฝะฐะปะธัะธะบะฐ (20 ะผะธะฝ)
โโโ ะกะพะทะดะฐัั usePlatformStats.ts
โโโ ะะฑะฝะพะฒะธัั StatsHighlightBanner.tsx

ะญัะฐะฟ 2: ะะตะฝั ัััะดะธะธ (30 ะผะธะฝ)
โโโ ะะฑะฝะพะฒะธัั StudioActions.tsx
โโโ ะะพะฑะฐะฒะธัั MIDI ะฟัะฝะบัั ั ะฟะพะดะผะตะฝั ััะตะผะพะฒ
โโโ ะะฝัะตะณัะธัะพะฒะฐัั useFeatureAccess
โโโ ะะฑะฝะพะฒะธัั MobileTrackActionSheet.tsx
```

---

## 6. UX ะดะธะทะฐะนะฝ ะผะตะฝั

### Desktop (DropdownMenu)
```
๐ ะัะบัััั ะฒ ัััะดะธะธ
  โโโ ๐๏ธ ะัะบัััั ัััะดะธั
  โโโ ๐ ะะฐะผะตะฝะฐ ัะตะบัะธะธ [PRO]
  โโโ โโโโโโโโโโโโโ
  โโโ โ๏ธ ะกัะตะผั (2 ะดะพัะพะถะบะธ)
  โโโ โจ ะกัะตะผั (6+ ะดะพัะพะถะตะบ) [PRO]
  โโโ โโโโโโโโโโโโโ
  โโโ ๐น MIDI ััะฐะฝัะบัะธะฟัะธั [PRO] โ
       โโโ ๐ค ะะพะบะฐะป โ MIDI
       โโโ ๐ฅ ะะฐัะฐะฑะฐะฝั โ MIDI
       โโโ ๐ธ ะะธัะฐัะฐ โ MIDI
       โโโ ...
```

### Mobile (ActionSheet)
ะะฝะฐะปะพะณะธัะฝะฐั ััััะบัััะฐ ั ะฑะพะปััะธะผะธ touch targets (44px+)
