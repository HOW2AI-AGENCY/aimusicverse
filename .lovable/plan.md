
# –ü–ª–∞–Ω: –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞—É–¥–∏—Ç UI/UX –∏ —É–ª—É—á—à–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞—É–¥–∏—Ç–∞

### 1. –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥–ø–∏—Å–æ–∫ –∏ –ø–æ–∫—É–ø–æ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–æ–±–ª–µ–º—ã |
|-----------|--------|----------|
| `SubscriptionUpgradePopup` | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤ |
| `WelcomeBonusPopup` | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º |
| `UpgradePrompt` | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ FeatureGate |
| `CreditBalanceWarning` | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é |
| –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/pricing` | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | –ù–µ—Ç –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ —Å –≥–ª–∞–≤–Ω–æ–π, —É–ø–æ–º–∏–Ω–∞–µ—Ç Stars –≤–º–µ—Å—Ç–æ RUB |

### 2. –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ UX-–ø—Ä–æ–±–ª–µ–º—ã

**A. –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è –∏ –ø–æ–¥–ø–∏—Å–∫–∏:**
- –ù–µ—Ç –≤–∏–¥–∏–º–æ–π –∫–Ω–æ–ø–∫–∏ "–ö—É–ø–∏—Ç—å –∫—Ä–µ–¥–∏—Ç—ã" –Ω–∞ –≥–ª–∞–≤–Ω–æ–π/–≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- `SubscriptionUpgradePopup` —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ª–∏–º–∏—Ç–∞—Ö, –Ω–µ—Ç –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
- –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Pricing —É–ø–æ–º–∏–Ω–∞—é—Ç—Å—è "Telegram Stars" —Ö–æ—Ç—è –æ–ø–ª–∞—Ç–∞ —Ç–æ–ª—å–∫–æ RUB
- –ù–µ—Ç floating CTA –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –ø—Ä–∏ –Ω–∏–∑–∫–æ–º –±–∞–ª–∞–Ω—Å–µ

**B. –û–Ω–±–æ—Ä–¥–∏–Ω–≥:**
- `QuickStartOverlay` –∏ `OnboardingOverlay` —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ä–∞–∑–¥–µ–ª—å–Ω–æ ‚Äî –Ω—É–∂–Ω–∞ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è
- `FirstTimeHeroCard` —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω, –Ω–æ –Ω–µ —Å–≤—è–∑–∞–Ω —Å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥-–ø–æ—Ç–æ–∫–æ–º
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ –ø–æ —Ç–∏–ø–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**C. –ü–æ–¥—Å–∫–∞–∑–∫–∏ –∏ hints:**
- `FeatureHint` ‚Äî 6 –ø–æ–¥—Å–∫–∞–∑–æ–∫ (generate_prompt, library_swipe, stem_studio, quick_presets, ab_versions, lyrics_tags)
- –ù–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –ø–æ–¥—Å–∫–∞–∑–æ–∫ –¥–ª—è –ø—Ä–µ–º–∏—É–º-—Ñ—É–Ω–∫—Ü–∏–π
- –ù–µ—Ç –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—É–¥–∏–∏

**D. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ anti-spam:**
- `SmartAlertProvider` ‚Äî —Ö–æ—Ä–æ—à–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å cooldowns –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏
- `useAntiSpam` ‚Äî –ª–∏–º–∏—Ç—ã –Ω–∞ —Å–µ—Å—Å–∏—é (3 –∞–ª–µ—Ä—Ç–∞) –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª (30 —Å–µ–∫)
- –¢–∏—Ö–∏–µ —á–∞—Å—ã –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**E. Telegram –±–æ—Ç:**
- `navigation.ts` ‚Äî –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Å –º–µ–Ω—é –∏ –ø–æ–¥–º–µ–Ω—é
- `notifications.ts` ‚Äî 10 —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (track_completed, new_follower, etc.)
- `payments.ts` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ buy_credits, buy_product
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞: –Ω–µ—Ç –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø—Ä–∏ –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö

---

## üéØ –ü–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏–π

### –§–∞–∑–∞ 1: –£–ª—É—á—à–µ–Ω–∏–µ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –≤—ã—Å–æ–∫–∏–π)

#### 1.1 –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–æ–∫—É–ø–∫–∞–º
**–°–æ–∑–¥–∞—Ç—å:** `src/components/premium/QuickBuyButton.tsx`
- Floating –∫–Ω–æ–ø–∫–∞ "–ö—Ä–µ–¥–∏—Ç—ã" –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –ø—Ä–∏ –±–∞–ª–∞–Ω—Å–µ < 30
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å
- –û–¥–∏–Ω –∫–ª–∏–∫ ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç `SubscriptionUpgradePopup`

#### 1.2 –ü—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–π upsell
**–°–æ–∑–¥–∞—Ç—å:** `src/components/premium/ProactiveUpsellBanner.tsx`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ 3 —É—Å–ø–µ—à–Ω—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π —É free-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- "–í–∞–º –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å? –ü–æ–ª—É—á–∏—Ç–µ PRO –¥–ª—è –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞"
- Cooldown: 1 —Ä–∞–∑ –≤ —Å–µ—Å—Å–∏—é

#### 1.3 –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã Pricing
**–ò–∑–º–µ–Ω–∏—Ç—å:** `src/pages/Pricing.tsx`
- –£–±—Ä–∞—Ç—å —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ "Telegram Stars" (–æ–ø–ª–∞—Ç–∞ —Ç–æ–ª—å–∫–æ RUB)
- –î–æ–±–∞–≤–∏—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–æ–≤ (Free vs PRO vs PREMIUM)
- –£–ª—É—á—à–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ PREMIUM

---

### –§–∞–∑–∞ 2: –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –≤—ã—Å–æ–∫–∏–π)

#### 2.1 –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è –æ–Ω–±–æ—Ä–¥–∏–Ω–≥-–ø–æ—Ç–æ–∫–∞
**–ò–∑–º–µ–Ω–∏—Ç—å:** `src/components/onboarding/QuickStartOverlay.tsx`
- –î–æ–±–∞–≤–∏—Ç—å —à–∞–≥ "–í—ã–±–æ—Ä –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤" (–∂–∞–Ω—Ä—ã, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ)
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–≤–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã–±–æ—Ä–∞
- –°–≤—è–∑–∞—Ç—å —Å `OnboardingOverlay` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç—É—Ä–∞

#### 2.2 –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ onboarding tooltips
**–°–æ–∑–¥–∞—Ç—å:** `src/components/onboarding/ContextualOnboardingTip.tsx`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–∞–∂–¥–æ–π –∫–ª—é—á–µ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–µ–ª–∫–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç
- "–ü–æ–Ω—è—Ç–Ω–æ" –∏–ª–∏ "–ü–æ–¥—Ä–æ–±–Ω–µ–µ"

#### 2.3 –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ FEATURE_HINTS
**–ò–∑–º–µ–Ω–∏—Ç—å:** `src/hooks/useFeatureHints.ts`
- –î–æ–±–∞–≤–∏—Ç—å hints: `first_studio`, `cover_action`, `extend_action`, `midi_export`, `subscription_benefits`
- –°–≤—è–∑–∞—Ç—å —Å –ø—Ä–µ–º–∏—É–º-—Ñ—É–Ω–∫—Ü–∏—è–º–∏ –¥–ª—è –º—è–≥–∫–æ–≥–æ upsell

---

### –§–∞–∑–∞ 3: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –¥–æ—Å—Ç—É–ø–µ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: —Å—Ä–µ–¥–Ω–∏–π)

#### 3.1 Inline –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤ –º–µ–Ω—é
**–ò–∑–º–µ–Ω–∏—Ç—å:** `src/components/track-actions/sections/StudioActions.tsx`
- –î–ª—è locked features: –∏–∫–æ–Ω–∫–∞ üîí + "PRO" badge
- –ü—Ä–∏ –∫–ª–∏–∫–µ: –º—è–≥–∫–∏–π popup –≤–º–µ—Å—Ç–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞
- "–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ PRO. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ?"

#### 3.2 Subscription Required Modal (—É–ª—É—á—à–µ–Ω–∏–µ)
**–ò–∑–º–µ–Ω–∏—Ç—å:** `src/components/dialogs/SubscriptionRequiredDialog.tsx`
- –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ "Free vs PRO"
- –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–ª—è —Ç–µ–∫—É—â–µ–π —Ñ—É–Ω–∫—Ü–∏–∏
- "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å 3 –¥–Ω—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ" CTA (–µ—Å–ª–∏ –±—É–¥–µ—Ç trial)

#### 3.3 Balance-aware UI
**–°–æ–∑–¥–∞—Ç—å:** `src/components/premium/BalanceIndicator.tsx`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ header –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è: –∑–µ–ª—ë–Ω—ã–π (>50), –∂—ë–ª—Ç—ã–π (20-50), –∫—Ä–∞—Å–Ω—ã–π (<20)
- –ö–ª–∏–∫ ‚Üí –±—ã—Å—Ç—Ä—ã–π popup –¥–æ–∫—É–ø–∫–∏

---

### –§–∞–∑–∞ 4: Telegram –±–æ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: —Å—Ä–µ–¥–Ω–∏–π)

#### 4.1 –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
**–ò–∑–º–µ–Ω–∏—Ç—å:** `supabase/functions/telegram-bot/handlers/notifications.ts`
- –î–æ–±–∞–≤–∏—Ç—å rate limiting: max 1 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–∞ —Ç–∏–ø –≤ 5 –º–∏–Ω—É—Ç
- –ì—Ä—É–ø–∏—Ä–æ–≤–∞—Ç—å –ª–∞–π–∫–∏/–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ digest
- "–£ –≤–∞—Å 5 –Ω–æ–≤—ã—Ö –ª–∞–π–∫–æ–≤" –≤–º–µ—Å—Ç–æ 5 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

#### 4.2 –£–ª—É—á—à–µ–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
**–ò–∑–º–µ–Ω–∏—Ç—å:** `supabase/functions/telegram-bot/handlers/navigation.ts`
- –î–æ–±–∞–≤–∏—Ç—å breadcrumbs –≤ —Å–æ–æ–±—â–µ–Ω–∏—è
- "–í—ã –∑–¥–µ—Å—å: –ì–ª–∞–≤–Ω–∞—è > –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ > –¢—Ä–µ–∫"
- –ö–Ω–æ–ø–∫–∞ "üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é" –Ω–∞ –∫–∞–∂–¥–æ–º —ç–∫—Ä–∞–Ω–µ

#### 4.3 Smart deep links
**–ò–∑–º–µ–Ω–∏—Ç—å:** `supabase/functions/telegram-bot/handlers/deep-links.ts`
- –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ deep links —Å –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º
- `?startapp=generate_rock` ‚Üí –æ—Ç–∫—Ä—ã—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å –ø—Ä–æ–º–ø—Ç–æ–º "—Ä–æ–∫"
- `?startapp=buy_pro` ‚Üí —Å—Ä–∞–∑—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–¥–ø–∏—Å–∫–∏

#### 4.4 Notification cooldowns –≤ –ë–î
**–°–æ–∑–¥–∞—Ç—å:** —Ç–∞–±–ª–∏—Ü–∞ `telegram_notification_cooldowns`
- user_id, notification_type, last_sent_at
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∫–∞–∂–¥–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

### –§–∞–∑–∞ 5: –£–ª—É—á—à–µ–Ω–∏–µ –¥–∏–∑–∞–π–Ω–∞ –ø–æ–¥—Å–∫–∞–∑–æ–∫ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: —Å—Ä–µ–¥–Ω–∏–π)

#### 5.1 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ FeatureHint –¥–∏–∑–∞–π–Ω–∞
**–ò–∑–º–µ–Ω–∏—Ç—å:** `src/components/hints/FeatureHint.tsx`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DialogHeader –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏
- –£–ª—É—á—à–∏—Ç—å –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ arrow

#### 5.2 Smart Alerts –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏
**–ò–∑–º–µ–Ω–∏—Ç—å:** `src/components/notifications/smart-alerts/AlertIllustrations.tsx`
- –î–æ–±–∞–≤–∏—Ç—å –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏: `subscription-upgrade`, `low-balance`, `feature-locked`
- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ SVG –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö

#### 5.3 Toast —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è
**–ò–∑–º–µ–Ω–∏—Ç—å:** –ì–ª–æ–±–∞–ª—å–Ω—ã–µ toast —Å—Ç–∏–ª–∏
- –î–æ–±–∞–≤–∏—Ç—å –∏–∫–æ–Ω–∫–∏ —Ç–∏–ø–æ–≤ (success, error, warning)
- –£–ª—É—á—à–∏—Ç—å touch targets –¥–ª—è mobile
- Swipe to dismiss

---

## üìÅ –§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `src/components/premium/QuickBuyButton.tsx` | Floating –∫–Ω–æ–ø–∫–∞ –ø–æ–∫—É–ø–∫–∏ |
| `src/components/premium/ProactiveUpsellBanner.tsx` | Banner –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–π |
| `src/components/premium/BalanceIndicator.tsx` | –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –±–∞–ª–∞–Ω—Å–∞ –≤ header |
| `src/components/onboarding/ContextualOnboardingTip.tsx` | –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ |

### –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|------|-----------|
| `src/pages/Pricing.tsx` | –£–±—Ä–∞—Ç—å Stars, –¥–æ–±–∞–≤–∏—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–æ–≤ |
| `src/hooks/useFeatureHints.ts` | –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ hints |
| `src/components/onboarding/QuickStartOverlay.tsx` | –®–∞–≥ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ |
| `src/components/track-actions/sections/StudioActions.tsx` | Inline lock badges |
| `src/components/dialogs/SubscriptionRequiredDialog.tsx` | –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–æ–≤ |
| `src/components/hints/FeatureHint.tsx` | –£–ª—É—á—à–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω |
| `supabase/functions/telegram-bot/handlers/notifications.ts` | Rate limiting |
| `supabase/functions/telegram-bot/handlers/navigation.ts` | Breadcrumbs |

---

## üìê –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è

### Rate limiting —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (Telegram)

```typescript
// –í notifications.ts
const NOTIFICATION_COOLDOWNS: Record<NotificationType, number> = {
  track_liked: 5 * 60 * 1000,      // 5 –º–∏–Ω—É—Ç
  comment_received: 5 * 60 * 1000,
  new_follower: 10 * 60 * 1000,    // 10 –º–∏–Ω—É—Ç
  track_completed: 0,              // –ë–µ–∑ cooldown
  credits_earned: 30 * 1000,       // 30 —Å–µ–∫—É–Ω–¥
};

async function canSendNotification(userId: string, type: NotificationType): Promise<boolean> {
  const cooldown = NOTIFICATION_COOLDOWNS[type];
  if (cooldown === 0) return true;
  
  const { data } = await supabase
    .from('telegram_notification_cooldowns')
    .select('last_sent_at')
    .eq('user_id', userId)
    .eq('notification_type', type)
    .single();
  
  if (!data) return true;
  return Date.now() - new Date(data.last_sent_at).getTime() > cooldown;
}
```

### Digest —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

```typescript
// –í–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ª–∞–π–∫–∞—Ö
async function sendLikeDigest(userId: string) {
  const { count } = await supabase
    .from('notification_queue')
    .select('*', { count: 'exact' })
    .eq('user_id', userId)
    .eq('type', 'track_liked')
    .eq('sent', false);
  
  if (count > 0) {
    await sendMessage(chatId, `‚ù§Ô∏è *${count} –Ω–æ–≤—ã—Ö –ª–∞–π–∫–æ–≤* –Ω–∞ –≤–∞—à–∏ —Ç—Ä–µ–∫–∏!`);
    // –ü–æ–º–µ—Ç–∏—Ç—å –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ
  }
}
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–µ–µ | –¶–µ–ª—å |
|---------|---------|------|
| –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –ø–æ–¥–ø–∏—Å–∫—É | ~2% | 5% |
| –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ | ~60% | 85% |
| –ö–ª–∏–∫–∏ –Ω–∞ buy_credits (–±–æ—Ç) | ~50/–¥–µ–Ω—å | 150/–¥–µ–Ω—å |
| –ñ–∞–ª–æ–±—ã –Ω–∞ —Å–ø–∞–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π | N/A | 0 |
| Time to first generation | ~5 –º–∏–Ω | 2 –º–∏–Ω |

---

## üîÑ –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

```
–°–ø—Ä–∏–Ω—Ç 1 (2-3 –¥–Ω—è):
‚îú‚îÄ‚îÄ QuickBuyButton + BalanceIndicator
‚îú‚îÄ‚îÄ –§–∏–∫—Å Pricing.tsx (—É–±—Ä–∞—Ç—å Stars)
‚îî‚îÄ‚îÄ Rate limiting –≤ Telegram –±–æ—Ç–µ

–°–ø—Ä–∏–Ω—Ç 2 (2-3 –¥–Ω—è):
‚îú‚îÄ‚îÄ ProactiveUpsellBanner
‚îú‚îÄ‚îÄ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ FEATURE_HINTS
‚îî‚îÄ‚îÄ Inline lock badges –≤ StudioActions

–°–ø—Ä–∏–Ω—Ç 3 (2-3 –¥–Ω—è):
‚îú‚îÄ‚îÄ ContextualOnboardingTip
‚îú‚îÄ‚îÄ Breadcrumbs –≤ Telegram –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ –£–ª—É—á—à–µ–Ω–∏–µ FeatureHint –¥–∏–∑–∞–π–Ω–∞

–°–ø—Ä–∏–Ω—Ç 4 (1-2 –¥–Ω—è):
‚îú‚îÄ‚îÄ Digest —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îú‚îÄ‚îÄ Smart deep links
‚îî‚îÄ‚îÄ –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```
