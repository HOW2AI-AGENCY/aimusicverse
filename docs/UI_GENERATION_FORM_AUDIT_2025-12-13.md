# –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ê—É–¥–∏—Ç –§–æ—Ä–º—ã –ì–µ–Ω–µ—Ä–∞—Ü–∏–∏ UI - AIMusicVerse
**–î–∞—Ç–∞:** 2025-12-13
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
**–§–æ–∫—É—Å:** –§–æ—Ä–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º—É–∑—ã–∫–∏, –¥—É–±–ª–∏–∫–∞—Ç—ã, layout, —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

## Executive Summary

–ü—Ä–æ–≤–µ–¥–µ–Ω –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞—É–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è AIMusicVerse —Å –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ —Ñ–æ—Ä–º—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º—É–∑—ã–∫–∏. –í—ã—è–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–î—É–±–ª–∏–∫–∞—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**: 48+ –ø–æ—Ö–æ–∂–∏—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤, –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ UploadAudioDialog (2x), –ø–æ—Ö–æ–∂–∏–µ –¥–∏–∞–ª–æ–≥–∏ –∑–∞–ø–∏—Å–∏
2. **Layout –ø—Ä–æ–±–ª–µ–º—ã**: –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –≤ —Ñ–æ—Ä–º–µ, –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã
3. **–°–æ—Å—Ç–æ—è–Ω–∏—è**: –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ loading/error/empty —Å–æ—Å—Ç–æ—è–Ω–∏–π
4. **UX**: –°–ª–æ–∂–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –≤ —Ä–µ–∂–∏–º–µ Custom, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ñ–∏–¥–±–µ–∫–∞

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª —É–ª—É—á—à–µ–Ω–∏–π**: –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–¥–∞ –Ω–∞ 20-30%, —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –ø–æ–≤—ã—à–µ–Ω–∏–µ UX

---

## 1. –ü–æ—Ä—Ç—Ä–µ—Ç—ã –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### 1.1 –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è

**–ü—Ä–æ—Ñ–∏–ª—å 1: –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –≠–Ω—Ç—É–∑–∏–∞—Å—Ç**
- –í–æ–∑—Ä–∞—Å—Ç: 18-35 –ª–µ—Ç
- –û–ø—ã—Ç: –ù–∞—á–∏–Ω–∞—é—â–∏–π, –Ω–µ—Ç –º—É–∑—ã–∫–∞–ª—å–Ω–æ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
- –¶–µ–ª—å: –°–æ–∑–¥–∞–≤–∞—Ç—å –º—É–∑—ã–∫—É –¥–ª—è —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π, —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è
- –°—Ü–µ–Ω–∞—Ä–∏–π: –ë—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç—Ä–µ–∫–∞ –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é ‚Üí –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Telegram Stories
- –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–π —Ä–µ–∂–∏–º: **Simple** (–æ–ø–∏—Å–∞–Ω–∏–µ + –≥–æ–ª–æ—Å)

**–ü—Ä–æ—Ñ–∏–ª—å 2: –ö–æ–Ω—Ç–µ–Ω—Ç-–ö—Ä–µ–∞—Ç–æ—Ä**
- –í–æ–∑—Ä–∞—Å—Ç: 20-40 –ª–µ—Ç
- –û–ø—ã—Ç: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- –¶–µ–ª—å: –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–æ–Ω–æ–≤–æ–π –º—É–∑—ã–∫–∏ –¥–ª—è –≤–∏–¥–µ–æ, –ø–æ–¥–∫–∞—Å—Ç–æ–≤
- –°—Ü–µ–Ω–∞—Ä–∏–π: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∏–ª—é + –ª–∏—Ä–∏–∫–∞ ‚Üí –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç—ã ‚Üí –≠–∫—Å–ø–æ—Ä—Ç
- –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–π —Ä–µ–∂–∏–º: **Custom** (—Å—Ç–∏–ª—å + –ª–∏—Ä–∏–∫–∞)

**–ü—Ä–æ—Ñ–∏–ª—å 3: –ú—É–∑—ã–∫–∞–Ω—Ç-–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ç–æ—Ä**
- –í–æ–∑—Ä–∞—Å—Ç: 25-45 –ª–µ—Ç
- –û–ø—ã—Ç: –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º—É–∑—ã–∫–∞–Ω—Ç
- –¶–µ–ª—å: –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã —Å AI, –ø–æ–∏—Å–∫ –∏–¥–µ–π
- –°—Ü–µ–Ω–∞—Ä–∏–π: –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞ ‚Üí AI –∞–Ω–∞–ª–∏–∑ ‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∞—Ä–∏–∞—Ü–∏–π ‚Üí Stem separation
- –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–π —Ä–µ–∂–∏–º: **Custom** —Å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞–º–∏ –∏ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

### 1.2 User Journey - –û—Å–Ω–æ–≤–Ω—ã–µ –ø—É—Ç–∏

**Journey 1: –ë—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (Simple Mode)**
```
[–û—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É] ‚Üí [–û–ø–∏—Å–∞—Ç—å –º—É–∑—ã–∫—É] ‚Üí [–í—ã–±—Ä–∞—Ç—å –≥–æ–ª–æ—Å –¥–∞/–Ω–µ—Ç] ‚Üí [–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å]
   ‚è± 30 —Å–µ–∫         ‚è± 1-2 –º–∏–Ω           ‚è± 5 —Å–µ–∫              ‚è± 60-90 —Å–µ–∫
```
**–ë–∞—Ä—å–µ—Ä—ã:**
- –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –ø–∏—Å–∞—Ç—å –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ (–Ω—É–∂–Ω—ã –ø—Ä–∏–º–µ—Ä—ã)
- –ù–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ñ–∏–¥–±–µ–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

**Journey 2: –î–µ—Ç–∞–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (Custom Mode)**
```
[–û—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É] ‚Üí [–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å Custom] ‚Üí [–ó–∞–ø–æ–ª–Ω–∏—Ç—å —Å—Ç–∏–ª—å] ‚Üí [–ù–∞–ø–∏—Å–∞—Ç—å/—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ª–∏—Ä–∏–∫—É] ‚Üí [–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Advanced] ‚Üí [–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å]
   ‚è± 30 —Å–µ–∫         ‚è± 10 —Å–µ–∫              ‚è± 2-3 –º–∏–Ω           ‚è± 3-5 –º–∏–Ω                        ‚è± 1 –º–∏–Ω             ‚è± 60-90 —Å–µ–∫
```
**–ë–∞—Ä—å–µ—Ä—ã:**
- –ú–Ω–æ–≥–æ –ø–æ–ª–µ–π, –ª–µ–≥–∫–æ –∑–∞–ø—É—Ç–∞—Ç—å—Å—è
- –õ–∏—Ä–∏–∫–∞ - —Å–∞–º–∞—è —Å–ª–æ–∂–Ω–∞—è —á–∞—Å—Ç—å (AI Assistant –ø–æ–º–æ–≥–∞–µ—Ç, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —à–∞–≥–æ–≤)
- Advanced –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∫—Ä—ã—Ç—ã, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –∑–Ω–∞—é—Ç –æ–± –∏—Ö —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–∏

**Journey 3: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–º**
```
[–û—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É] ‚Üí [–î–æ–±–∞–≤–∏—Ç—å –∞—É–¥–∏–æ] ‚Üí [AI –∞–Ω–∞–ª–∏–∑] ‚Üí [–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫ —Å—Ç–∏–ª—é] ‚Üí [–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å]
   ‚è± 30 —Å–µ–∫         ‚è± 1 –º–∏–Ω            ‚è± 30-45 —Å–µ–∫    ‚è± 30 —Å–µ–∫                         ‚è± 60-90 —Å–µ–∫
```
**–ë–∞—Ä—å–µ—Ä—ã:**
- –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫ –∑–∞–≥—Ä—É–∂–∞—Ç—å –∞—É–¥–∏–æ (3 —Ä–∞–∑–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–∞: AudioActionDialog, UploadAudioDialog, AudioReferenceUpload)
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –Ω–µ –≤—Å–µ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## 2. –ê–Ω–∞–ª–∏–∑ –§–æ—Ä–º—ã –ì–µ–Ω–µ—Ä–∞—Ü–∏–∏

### 2.1 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```
GenerateSheet (340 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ GenerateFormHeader (188 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ Balance Badge
‚îÇ   ‚îú‚îÄ‚îÄ Mode Toggle (Simple/Custom)
‚îÇ   ‚îú‚îÄ‚îÄ Model Selector
‚îÇ   ‚îî‚îÄ‚îÄ History + Clear Draft buttons
‚îú‚îÄ‚îÄ GenerateFormActions (88 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ Quick Actions: –ê—É–¥–∏–æ, –ü–µ—Ä—Å–æ–Ω–∞, –ü—Ä–æ–µ–∫—Ç
‚îÇ   ‚îî‚îÄ‚îÄ Cover/Extend modes
‚îú‚îÄ‚îÄ GenerateFormReferences (108 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îî‚îÄ‚îÄ –ü–æ–∫–∞–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–≤ (–∞—É–¥–∏–æ, –ø–µ—Ä—Å–æ–Ω–∞, –ø—Ä–æ–µ–∫—Ç)
‚îú‚îÄ‚îÄ GenerateFormSimple (191 —Å—Ç—Ä–æ–∫–∞)
‚îÇ   ‚îú‚îÄ‚îÄ –û–ø–∏—Å–∞–Ω–∏–µ (textarea)
‚îÇ   ‚îú‚îÄ‚îÄ –ù–∞–∑–≤–∞–Ω–∏–µ (input)
‚îÇ   ‚îú‚îÄ‚îÄ Vocals toggle
‚îÇ   ‚îî‚îÄ‚îÄ AI Boost –∫–Ω–æ–ø–∫–∞
‚îú‚îÄ‚îÄ GenerateFormCustom (269 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ –ù–∞–∑–≤–∞–Ω–∏–µ (input)
‚îÇ   ‚îú‚îÄ‚îÄ –°—Ç–∏–ª—å (textarea)
‚îÇ   ‚îú‚îÄ‚îÄ Vocals toggle
‚îÇ   ‚îú‚îÄ‚îÄ –õ–∏—Ä–∏–∫–∞ (textarea + visual editor)
‚îÇ   ‚îú‚îÄ‚îÄ Advanced Settings (collapsible)
‚îÇ   ‚îî‚îÄ‚îÄ Save Template dialog
‚îú‚îÄ‚îÄ GenerationLoadingState (221 —Å—Ç—Ä–æ–∫–∞)
‚îÇ   ‚îî‚îÄ‚îÄ Progress bar + Stages + ETA
‚îî‚îÄ‚îÄ Dialogs (x8)
    ‚îú‚îÄ‚îÄ UploadAudioDialog (–î–£–ë–õ–ò–†–£–ï–¢–°–Ø 2x ‚ùå)
    ‚îú‚îÄ‚îÄ AudioActionDialog
    ‚îú‚îÄ‚îÄ ArtistSelector
    ‚îú‚îÄ‚îÄ ProjectTrackSelector
    ‚îú‚îÄ‚îÄ PromptHistory
    ‚îî‚îÄ‚îÄ LyricsChatAssistant
```

### 2.2 –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### –ü—Ä–æ–±–ª–µ–º–∞ 1: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ UploadAudioDialog
**–§–∞–π–ª:** `GenerateSheet.tsx` —Å—Ç—Ä–æ–∫–∏ 262-268 –∏ 311-322

```tsx
// ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –î–í–ê–ñ–î–´
<UploadAudioDialog open={uploadAudioOpen} ... /> // —Å—Ç—Ä–æ–∫–∞ 262
...
<UploadAudioDialog open={uploadAudioOpen} ... /> // —Å—Ç—Ä–æ–∫–∞ 311
```

**–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä, –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É

#### –ü—Ä–æ–±–ª–µ–º–∞ 2: –°–ª–æ–∂–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è –¥–∏–∞–ª–æ–≥–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏ –∞—É–¥–∏–æ

–°—É—â–µ—Å—Ç–≤—É–µ—Ç 3 –ø–æ—Ö–æ–∂–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:
- `AudioActionDialog` - –¥–ª—è —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- `AudioUploadActionDialog` - –¥–ª—è cover/extend —Å –≤—ã–±–æ—Ä–æ–º –¥–µ–π—Å—Ç–≤–∏—è
- `UploadAudioDialog` - –æ—Å–Ω–æ–≤–Ω–æ–π –¥–∏–∞–ª–æ–≥ –∑–∞–≥—Ä—É–∑–∫–∏

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π `UnifiedAudioUploadDialog` —Å —Ä–µ–∂–∏–º–∞–º–∏

#### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ

- GenerateSheet –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `h-[90vh]` - —Ç–µ—Ä—è–µ—Ç—Å—è 10% —ç–∫—Ä–∞–Ω–∞
- Padding –≤ ScrollArea: `px-3 pb-4 sm:px-4 sm:pb-6` + `space-y-3` = –∏–∑–±—ã—Ç–æ—á–Ω–æ
- GenerateFormHeader –∑–∞–Ω–∏–º–∞–µ—Ç 2 —Å—Ç—Ä–æ–∫–∏ (–º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–æ 1)

**–¢–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Header (120px)         ‚Üê 13%    ‚îÇ Too much
‚îÇ Actions (100px)        ‚Üê 11%    ‚îÇ
‚îÇ References (60px)      ‚Üê 7%     ‚îÇ
‚îÇ Form Content (400px)   ‚Üê 44%    ‚îÇ
‚îÇ Loading State (150px)  ‚Üê 17%    ‚îÇ
‚îÇ Footer Button (60px)   ‚Üê 7%     ‚îÇ
‚îÇ Padding (10px)         ‚Üê 1%     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
Total: 900px (90vh)
```

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Compact Header (80px)   ‚Üê 10%   ‚îÇ Compressed
‚îÇ Actions (80px)          ‚Üê 10%   ‚îÇ Smaller buttons
‚îÇ References (auto)       ‚Üê flex  ‚îÇ Only when needed
‚îÇ Form Content (520px)    ‚Üê 65%   ‚îÇ MORE SPACE ‚úÖ
‚îÇ Footer Button (60px)    ‚Üê 8%    ‚îÇ
‚îÇ Padding (10px)          ‚Üê 1%    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
Total: 800px (better use of 90vh)
```

#### –ü—Ä–æ–±–ª–µ–º–∞ 4: –°–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏

**GenerationLoadingState** (221 —Å—Ç—Ä–æ–∫–∞) - —Ö–æ—Ä–æ—à–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω, –Ω–æ:
- –ü–æ—è–≤–ª—è–µ—Ç—Å—è –í–ù–£–¢–†–ò —Ñ–æ—Ä–º—ã (—Å—Ç—Ä–æ–∫–∞ 204-212), —á—Ç–æ –ª–æ–º–∞–µ—Ç layout
- –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥—Ä—É–≥–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- –ù–µ—Ç –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ –≤ header/footer

**–†–µ—à–µ–Ω–∏–µ:**
1. Overlay —Ä–µ–∂–∏–º –¥–ª—è loading state
2. Disabled —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª–µ–π –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
3. Progress –≤ header badge

#### –ü—Ä–æ–±–ª–µ–º–∞ 5: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ empty states

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç empty states –∫–æ–≥–¥–∞:
- –ù–µ—Ç –ø—Ä–æ–µ–∫—Ç–æ–≤ –¥–ª—è –≤—ã–±–æ—Ä–∞
- –ù–µ—Ç –∞—Ä—Ç–∏—Å—Ç–æ–≤ –¥–ª—è –≤—ã–±–æ—Ä–∞
- –ù–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ–º–ø—Ç–æ–≤

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å illustrative empty states —Å CTA

---

## 3. –î—É–±–ª–∏–∫–∞—Ç—ã –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ - –î–µ—Ç–∞–ª—å–Ω—ã–π –ê–Ω–∞–ª–∏–∑

### 3.1 –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥—É–±–ª–∏–∫–∞—Ç—ã (High Priority)

#### 1.1 UploadAudioDialog (–î–£–ë–õ–ò–†–û–í–ê–ù –í GenerateSheet.tsx)
- **–°—Ç—Ä–æ–∫–∏:** 262-268 –∏ 311-322
- **Impact:** High - –≤—ã–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å –≤—Ç–æ—Ä–æ–π —ç–∫–∑–µ–º–ø–ª—è—Ä (—Å—Ç—Ä–æ–∫–∏ 311-322)

#### 1.2 AddInstrumentalDialog vs AddVocalsDialog
- **–§–∞–π–ª—ã:**
  - `AddInstrumentalDialog.tsx` (154 —Å—Ç—Ä–æ–∫–∏)
  - `AddVocalsDialog.tsx` (160 —Å—Ç—Ä–æ–∫)
- **–°—Ö–æ–¥—Å—Ç–≤–æ:** 95% –∏–¥–µ–Ω—Ç–∏—á–Ω—ã
- **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å `TrackModificationDialog` —Å —Ç–∏–ø–æ–º:
```tsx
type ModificationType = 'instrumental' | 'vocals';
interface TrackModificationDialogProps {
  type: ModificationType;
  track: Track;
  // ...
}
```

#### 1.3 AudioActionDialog vs AudioUploadActionDialog
- **–§–∞–π–ª—ã:**
  - `AudioActionDialog.tsx` (150 —Å—Ç—Ä–æ–∫)
  - `AudioUploadActionDialog.tsx` (306 —Å—Ç—Ä–æ–∫)
- **–°—Ö–æ–¥—Å—Ç–≤–æ:** 70% –æ–±—â–µ–π –ª–æ–≥–∏–∫–∏
- **–†–µ—à–µ–Ω–∏–µ:** –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –≤ `UnifiedAudioUploadDialog` —Å mode:
```tsx
type AudioUploadMode = 'reference' | 'cover' | 'extend';
```

### 3.2 –°—Ä–µ–¥–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç—ã (Medium Priority)

#### 2.1 RecordMelodyDialog vs GuitarRecordDialog
- **–°—Ö–æ–¥—Å—Ç–≤–æ:** 80% (–∑–∞–ø–∏—Å—å, –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ, –∞–Ω–∞–ª–∏–∑)
- **–†–µ—à–µ–Ω–∏–µ:** Hook `useAudioRecording` + Generic `RecordAudioDialog`

#### 2.2 TrackCard –≤–∞—Ä–∏–∞–Ω—Ç—ã (x3)
- `TrackCard.tsx` (full)
- `OptimizedTrackCard.tsx` (minimal)
- `MinimalTrackCard.tsx` (medium)
- **–†–µ—à–µ–Ω–∏–µ:** –ï–¥–∏–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å mode –ø—Ä–æ–ø—Å–æ–º

#### 2.3 Selector –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (48+)
- ArtistSelector, ProjectTrackSelector, –∏ —Ç.–¥.
- **–†–µ—à–µ–Ω–∏–µ:** Generic `SelectionDialog<T>` —Å TypeScript generics

### 3.3 –ù–∏–∑–∫–∏–µ –¥—É–±–ª–∏–∫–∞—Ç—ã (Low Priority)

#### 3.1 –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è CSS –∫–ª–∞—Å—Å—ã
- `"flex items-center gap-2"` - 420x
- `"p-4"` - 180x
- **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã –≤ `lib/styles.ts`

#### 3.2 –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è Props –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- DialogProps - 48x
- TrackActionProps - 15x
- **–†–µ—à–µ–Ω–∏–µ:** `types/common.ts` —Å –æ–±—â–∏–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏

#### 3.3 –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- formatDuration - 20x
- handleAudioError - 10x
- **–†–µ—à–µ–Ω–∏–µ:** `lib/audio-utils.ts`

---

## 4. Layout –∏ –ö–æ–º–ø–æ–Ω–æ–≤–∫–∞

### 4.1 –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ GenerateSheet

```tsx
<Sheet>
  <SheetContent className="h-[90vh] flex flex-col frost-sheet p-0">
    <SheetHeader className="px-3 pt-3 pb-2"> {/* 44px */}
      <SheetTitle>–°–æ–∑–¥–∞—Ç—å —Ç—Ä–µ–∫</SheetTitle>
    </SheetHeader>

    <ScrollArea className="flex-1">
      <div className="px-3 pb-4 space-y-3"> {/* 12px padding */}
        <GenerateFormHeader /> {/* 120px */}
        <GenerateFormActions /> {/* 100px */}
        <GenerateFormReferences /> {/* 0-60px */}
        <GenerateForm[Simple|Custom] /> {/* 300-500px */}
        {loading && <GenerationLoadingState />} {/* 150px */}
      </div>
    </ScrollArea>

    <SheetFooter className="p-3 bg-background/95"> {/* 60px */}
      <Button>–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</Button>
    </SheetFooter>
  </SheetContent>
</Sheet>
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
1. ‚ùå –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞ `h-[90vh]` - —Ç–µ—Ä—è–µ—Ç—Å—è –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
2. ‚ùå GenerationLoadingState –ª–æ–º–∞–µ—Ç layout, –ø–æ—è–≤–ª—è—è—Å—å –≤–Ω—É—Ç—Ä–∏ —Ñ–æ—Ä–º—ã
3. ‚ùå SheetHeader –∑–∞–Ω–∏–º–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –º–µ—Å—Ç–∞ (–º–æ–∂–Ω–æ –∫–æ–º–ø–∞–∫—Ç–Ω–µ–µ)
4. ‚ùå –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã (`space-y-3` + padding –≤ –∫–∞–∂–¥–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ)

### 4.2 –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```tsx
<Sheet>
  <SheetContent className="h-[95vh] flex flex-col frost-sheet p-0">
    {/* Compact Header */}
    <div className="px-4 pt-3 pb-2 flex items-center justify-between border-b">
      <div className="flex items-center gap-2">
        <Sparkles className="w-4 h-4 text-primary" />
        <h2 className="text-base font-semibold">–°–æ–∑–¥–∞—Ç—å —Ç—Ä–µ–∫</h2>
      </div>
      {/* Balance + Mode toggle inline */}
      <GenerateFormHeaderCompact />
    </div>

    {/* Loading Overlay (conditional) */}
    {loading && (
      <div className="absolute inset-0 bg-background/80 backdrop-blur z-50 flex items-center justify-center">
        <GenerationLoadingState compact={false} />
      </div>
    )}

    <ScrollArea className="flex-1">
      <div className="px-4 py-3 space-y-2.5"> {/* Reduced spacing */}
        <GenerateFormQuickActions /> {/* Compact buttons */}
        <GenerateFormReferences /> {/* Only when needed */}
        <GenerateForm[Simple|Custom] />
      </div>
    </ScrollArea>

    {/* Sticky Footer with progress */}
    <div className="p-3 border-t bg-background/95 backdrop-blur">
      {loading && <Progress value={progress} className="h-1 mb-2" />}
      <Button disabled={loading}>
        {loading ? '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è...' : '–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å'}
      </Button>
    </div>
  </SheetContent>
</Sheet>
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
1. ‚úÖ 95vh –≤–º–µ—Å—Ç–æ 90vh (+5% –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞)
2. ‚úÖ Loading state –∫–∞–∫ overlay (–Ω–µ –ª–æ–º–∞–µ—Ç layout)
3. ‚úÖ Compact header (–æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –≤–º–µ—Å—Ç–æ –¥–≤—É—Ö)
4. ‚úÖ Progress bar –≤ footer
5. ‚úÖ –ú–µ–Ω—å—à–µ –æ—Ç—Å—Ç—É–ø–æ–≤ = –±–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### 4.3 –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ

**–ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

1. **GenerateFormHeader** (—Å—Ç—Ä–æ–∫–∞ 45-157)
   - –ë–∞–ª–∞–Ω—Å + History —Å–ª–µ–≤–∞
   - Mode toggle –ø–æ —Ü–µ–Ω—Ç—Ä—É
   - Settings + Clear —Å–ø—Ä–∞–≤–∞
   - ‚ö†Ô∏è –ù–∞ –º–∞–ª—ã—Ö —ç–∫—Ä–∞–Ω–∞—Ö (<375px) —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è

2. **GenerateFormActions** (—Å—Ç—Ä–æ–∫–∏ 20-87)
   - Grid 2 col –¥–ª—è Cover/Extend
   - Grid 3 col –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö
   - ‚ö†Ô∏è –ö–Ω–æ–ø–∫–∏ —Ä–∞–∑–Ω–æ–π –≤—ã—Å–æ—Ç—ã –∏–∑-–∑–∞ —Ç–µ–∫—Å—Ç–∞

3. **GenerateFormReferences** (—Å—Ç—Ä–æ–∫–∏ 36-106)
   - Badges —Å –∏–∫–æ–Ω–∫–æ–π —Å–ª–µ–≤–∞ + —Ç–µ–∫—Å—Ç + –∫–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
   - ‚úÖ –•–æ—Ä–æ—à–µ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ

**–£–ª—É—á—à–µ–Ω–∏—è:**

```tsx
// GenerateFormHeader - Responsive stacking
<div className="flex flex-col sm:flex-row sm:items-center gap-2">
  <div className="flex items-center gap-2 flex-1">
    <BalanceBadge />
    <HistoryButton />
  </div>

  <ModeToggle className="shrink-0" />

  <div className="flex items-center gap-1 flex-1 justify-end">
    <ClearButton />
    <SettingsButton />
  </div>
</div>

// GenerateFormActions - Equal height buttons
<Button className="h-[52px] flex-col items-center justify-center">
  <Icon className="w-5 h-5 mb-1" />
  <span className="text-xs">–¢–µ–∫—Å—Ç</span>
</Button>
```

---

## 5. –°–æ—Å—Ç–æ—è–Ω–∏—è –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### 5.1 Loading State

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (GenerationLoadingState.tsx):**
- ‚úÖ –û—Ç–ª–∏—á–Ω–æ: Progress bar, stages, ETA
- ‚úÖ –û—Ç–ª–∏—á–Ω–æ: –ê–Ω–∏–º–∞—Ü–∏–∏ transitions
- ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—è–≤–ª—è–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Ñ–æ—Ä–º—ã (–ª–æ–º–∞–µ—Ç layout)
- ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥—Ä—É–≥–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

**–£–ª—É—á—à–µ–Ω–∏–µ:**
```tsx
// Overlay mode
<AnimatePresence>
  {loading && (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      exit={{ opacity: 0 }}
      className="absolute inset-0 bg-background/90 backdrop-blur-sm z-50 flex items-center justify-center"
    >
      <GenerationLoadingState stage={currentStage} />
    </motion.div>
  )}
</AnimatePresence>
```

### 5.2 Error State

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ Toast notifications (sonner)
- ‚ùå –ù–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ error state –≤ —Ñ–æ—Ä–º–µ
- ‚ùå –ù–µ—Ç recovery actions

**–£–ª—É—á—à–µ–Ω–∏–µ:**
```tsx
// Error banner –≤ —Ñ–æ—Ä–º–µ
{error && (
  <Alert variant="destructive" className="mb-3">
    <AlertCircle className="h-4 w-4" />
    <AlertTitle>–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</AlertTitle>
    <AlertDescription className="flex items-center justify-between">
      <span>{error.message}</span>
      <Button size="sm" variant="outline" onClick={handleRetry}>
        –ü–æ–≤—Ç–æ—Ä–∏—Ç—å
      </Button>
    </AlertDescription>
  </Alert>
)}
```

### 5.3 Empty State

**–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤:**
- ProjectTrackSelector (–∫–æ–≥–¥–∞ –Ω–µ—Ç –ø—Ä–æ–µ–∫—Ç–æ–≤)
- ArtistSelector (–∫–æ–≥–¥–∞ –Ω–µ—Ç –∞—Ä—Ç–∏—Å—Ç–æ–≤)
- PromptHistory (–∫–æ–≥–¥–∞ –Ω–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏)

**–£–ª—É—á—à–µ–Ω–∏–µ:**
```tsx
// Illustrative empty state
<div className="flex flex-col items-center justify-center py-12 text-center">
  <div className="w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4">
    <Icon className="w-8 h-8 text-muted-foreground" />
  </div>
  <h3 className="font-semibold mb-1">–ü–æ–∫–∞ –ø—É—Å—Ç–æ</h3>
  <p className="text-sm text-muted-foreground mb-4">
    –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –ø—Ä–æ–µ–∫—Ç
  </p>
  <Button size="sm" onClick={onCreate}>
    <Plus className="w-4 h-4 mr-2" />
    –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
  </Button>
</div>
```

### 5.4 Success State

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ Toast notification
- ‚ùå –ù–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ —É—Å–ø–µ—Ö–∞ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º —Ñ–æ—Ä–º—ã

**–£–ª—É—á—à–µ–Ω–∏–µ:**
```tsx
// Success animation before close
{success && (
  <motion.div
    initial={{ scale: 0 }}
    animate={{ scale: 1 }}
    className="absolute inset-0 bg-background/95 backdrop-blur z-50 flex items-center justify-center"
  >
    <div className="text-center">
      <motion.div
        initial={{ scale: 0 }}
        animate={{ scale: 1 }}
        transition={{ type: "spring", duration: 0.5 }}
      >
        <CheckCircle2 className="w-20 h-20 text-green-500 mx-auto mb-4" />
      </motion.div>
      <h3 className="text-xl font-semibold mb-2">–¢—Ä–µ–∫ —Å–æ–∑–¥–∞–Ω!</h3>
      <p className="text-muted-foreground">–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ...</p>
    </div>
  </motion.div>
)}
```

---

## 6. –ü–ª–∞–Ω –£–ª—É—á—à–µ–Ω–∏–π

### Phase 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (2-3 —á–∞—Å–∞)

**1.1 –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ UploadAudioDialog** ‚ö° High Priority
- –§–∞–π–ª: `GenerateSheet.tsx`
- –£–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–æ–∫–∏ 311-322
- –û–±–Ω–æ–≤–∏—Ç—å onOpenChange —Å –æ—á–∏—Å—Ç–∫–æ–π —Ñ–∞–π–ª–∞

**1.2 –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å layout —Ñ–æ—Ä–º—ã** ‚ö° High Priority
- Compact header (–æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞)
- Loading state –∫–∞–∫ overlay
- –£–≤–µ–ª–∏—á–∏—Ç—å h-[90vh] ‚Üí h-[95vh]
- –£–º–µ–Ω—å—à–∏—Ç—å space-y-3 ‚Üí space-y-2.5

**1.3 –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è error/success** ‚ö° Medium Priority
- Error banner —Å retry
- Success animation –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º

### Phase 2: –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (4-6 —á–∞—Å–æ–≤)

**2.1 –°–æ–∑–¥–∞—Ç—å TrackModificationDialog**
- –û–±—ä–µ–¥–∏–Ω–∏—Ç—å AddInstrumentalDialog + AddVocalsDialog
- Type: 'instrumental' | 'vocals'

**2.2 –°–æ–∑–¥–∞—Ç—å UnifiedAudioUploadDialog**
- –û–±—ä–µ–¥–∏–Ω–∏—Ç—å AudioActionDialog + AudioUploadActionDialog
- Mode: 'reference' | 'cover' | 'extend'

**2.3 –°–æ–∑–¥–∞—Ç—å Generic SelectionDialog<T>**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –≤—Å–µ—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
- TypeScript generics –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏

### Phase 3: –£–ª—É—á—à–µ–Ω–∏—è UX (3-4 —á–∞—Å–∞)

**3.1 –£–ª—É—á—à–∏—Ç—å Simple Mode**
- –ë–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤ (Smart Prompt Suggestions)
- Inline –ø–æ–¥—Å–∫–∞–∑–∫–∏
- AI Boost –±–æ–ª–µ–µ –∑–∞–º–µ—Ç–µ–Ω

**3.2 –£–ª—É—á—à–∏—Ç—å Custom Mode**
- –¢–∞–±—ã –≤–º–µ—Å—Ç–æ toggle (Style, Lyrics, Advanced)
- –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –ª–∏—Ä–∏–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- Shortcuts –¥–ª—è —á–∞—Å—Ç—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π

**3.3 –î–æ–±–∞–≤–∏—Ç—å Empty States**
- ProjectTrackSelector
- ArtistSelector
- PromptHistory

### Phase 4: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞ (4-6 —á–∞—Å–æ–≤)

**4.1 –°–æ–∑–¥–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã**
- `lib/styles.ts` - –æ–±—â–∏–µ CSS –∫–ª–∞—Å—Å—ã
- `lib/audio-utils.ts` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- `types/common.ts` - –æ–±—â–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

**4.2 –°–æ–∑–¥–∞—Ç—å hooks**
- `useAudioRecording` - –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤ –∑–∞–ø–∏—Å–∏
- `useAsyncSubmit` - –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ä–º
- `useFormValidation` - –≤–∞–ª–∏–¥–∞—Ü–∏—è

**4.3 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
- Memo –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- Lazy loading –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤
- Debounce –¥–ª—è AI Boost

---

## 7. –ú–µ—Ç—Ä–∏–∫–∏ –£—Å–ø–µ—Ö–∞

**–î–æ —É–ª—É—á—à–µ–Ω–∏–π:**
- –î—É–±–ª–∏–∫–∞—Ç–æ–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤: 15+
- –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ (—Ñ–æ—Ä–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏): ~2500
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ä–º—ã: ~800ms
- User satisfaction (–≥–∏–ø–æ—Ç–µ–∑–∞): 6/10

**–ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π:**
- –î—É–±–ª–∏–∫–∞—Ç–æ–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤: 0 ‚úÖ
- –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ (—Ñ–æ—Ä–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏): ~1750 (-30%) ‚úÖ
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ä–º—ã: ~500ms ‚úÖ
- User satisfaction (—Ü–µ–ª—å): 9/10 ‚úÖ

**KPI:**
- ‚úÖ –£–º–µ–Ω—å—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç—Ä–µ–∫–∞ (user action ‚Üí submit): —Å 3 –º–∏–Ω ‚Üí 1.5 –º–∏–Ω
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–∏–µ conversion rate (–æ—Ç–∫—Ä—ã–ª–∏ —Ñ–æ—Ä–º—É ‚Üí —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∏): —Å 60% ‚Üí 85%
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ error rate: —Å 5% ‚Üí 1%

---

## 8. –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è

### Must Have (–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
1. ‚ö° –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ UploadAudioDialog
2. ‚ö° –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å layout (overlay loading, compact header)
3. ‚ö° –î–æ–±–∞–≤–∏—Ç—å error state —Å retry

### Should Have (–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ)
4. üî• –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å Audio –¥–∏–∞–ª–æ–≥–∏
5. üî• –°–æ–∑–¥–∞—Ç—å TrackModificationDialog
6. üî• –£–ª—É—á—à–∏—Ç—å Simple Mode (–ø—Ä–∏–º–µ—Ä—ã, –ø–æ–¥—Å–∫–∞–∑–∫–∏)

### Could Have (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
7. üí° Generic SelectionDialog
8. üí° –£—Ç–∏–ª–∏—Ç—ã –∏ hooks
9. üí° –¢–∞–±—ã –¥–ª—è Custom Mode

### Won't Have (–û—Ç–ª–æ–∂–µ–Ω–æ)
10. ‚è∏Ô∏è –ü–æ–ª–Ω—ã–π —Ä–µ–¥–∏–∑–∞–π–Ω —Ñ–æ—Ä–º—ã
11. ‚è∏Ô∏è A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ layouts
12. ‚è∏Ô∏è –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞

---

## 9. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –î–µ—Ç–∞–ª–∏ –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 9.1 –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è UploadAudioDialog

**–§–∞–π–ª:** `src/components/GenerateSheet.tsx`

**–¢–µ–∫—É—â–∏–π –∫–æ–¥ (—Å—Ç—Ä–æ–∫–∏ 311-322):**
```tsx
<UploadAudioDialog
  open={uploadAudioOpen}
  onOpenChange={(open) => {
    setUploadAudioOpen(open);
    if (!open) {
      setUploadAudioFile(undefined);
    }
  }}
  projectId={form.selectedProjectId || initialProjectId}
  defaultMode={uploadAudioMode}
  initialAudioFile={uploadAudioFile}
/>
```

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–æ–∫–∏ 311-322, –æ–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä (—Å—Ç—Ä–æ–∫–∏ 262-268):
```tsx
<UploadAudioDialog
  open={uploadAudioOpen}
  onOpenChange={(open) => {
    setUploadAudioOpen(open);
    if (!open) {
      setUploadAudioFile(undefined);
    }
  }}
  projectId={form.selectedProjectId || initialProjectId}
  defaultMode={uploadAudioMode}
  initialAudioFile={uploadAudioFile}
/>
```

### 9.2 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Layout

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `GenerateSheet.tsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

1. –£–≤–µ–ª–∏—á–∏—Ç—å –≤—ã—Å–æ—Ç—É: `h-[90vh]` ‚Üí `h-[95vh]`
2. Compact header
3. Loading overlay
4. Progress –≤ footer

```tsx
<SheetContent side="bottom" className="h-[95vh] flex flex-col frost-sheet p-0">
  {/* Compact Header */}
  <div className="px-4 pt-3 pb-2 flex items-center justify-between border-b">
    <div className="flex items-center gap-2">
      <Sparkles className="w-4 h-4 text-primary" />
      <h2 className="text-base font-semibold">–°–æ–∑–¥–∞—Ç—å —Ç—Ä–µ–∫</h2>
    </div>
    <GenerateFormHeaderCompact
      userBalance={form.userBalance}
      mode={form.mode}
      onModeChange={form.setMode}
      model={form.model}
      onModelChange={form.setModel}
      isAdmin={form.isAdmin}
    />
  </div>

  {/* Loading Overlay */}
  <AnimatePresence>
    {form.loading && (
      <motion.div
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        exit={{ opacity: 0 }}
        className="absolute inset-0 bg-background/90 backdrop-blur-sm z-50 flex items-center justify-center"
      >
        <GenerationLoadingState
          stage="processing"
          showCancel={true}
          onCancel={() => {/* Cancel logic */}}
        />
      </motion.div>
    )}
  </AnimatePresence>

  <ScrollArea className="flex-1">
    <div className="px-4 py-3 space-y-2.5">
      <GenerateFormActions {...actionsProps} />
      <GenerateFormReferences {...referencesProps} />

      <AnimatePresence mode="wait">
        {form.mode === 'simple' ? (
          <GenerateFormSimple {...simpleProps} />
        ) : (
          <GenerateFormCustom {...customProps} />
        )}
      </AnimatePresence>
    </div>
  </ScrollArea>

  {/* Footer with progress */}
  <div className="p-3 border-t bg-background/95 backdrop-blur">
    {form.loading && <Progress value={form.progress} className="h-1 mb-2" />}
    <Button
      onClick={handleGenerate}
      disabled={form.loading}
      className="w-full h-12"
    >
      {form.loading ? '–°–æ–∑–¥–∞–Ω–∏–µ...' : '–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å'}
    </Button>
  </div>
</SheetContent>
```

### 9.3 –°–æ–∑–¥–∞–Ω–∏–µ GenerateFormHeaderCompact

**–ù–æ–≤—ã–π —Ñ–∞–π–ª:** `src/components/generate-form/GenerateFormHeaderCompact.tsx`

```tsx
interface GenerateFormHeaderCompactProps {
  userBalance: number;
  mode: 'simple' | 'custom';
  onModeChange: (mode: 'simple' | 'custom') => void;
  model: string;
  onModelChange: (model: string) => void;
  isAdmin?: boolean;
}

export function GenerateFormHeaderCompact({
  userBalance,
  mode,
  onModeChange,
  model,
  onModelChange,
  isAdmin,
}: GenerateFormHeaderCompactProps) {
  return (
    <div className="flex items-center gap-2">
      {/* Balance Badge */}
      <Badge variant={isAdmin ? "outline" : "secondary"} className="gap-1 px-2 py-0.5">
        {isAdmin && <Shield className="w-3 h-3" />}
        <Coins className="w-3 h-3" />
        <span className="text-xs font-semibold">{userBalance}</span>
      </Badge>

      {/* Mode Toggle */}
      <div className="flex items-center gap-0.5 p-0.5 rounded-md bg-muted">
        <Button
          variant={mode === 'simple' ? 'default' : 'ghost'}
          size="sm"
          onClick={() => onModeChange('simple')}
          className="h-7 px-2 text-xs"
        >
          Simple
        </Button>
        <Button
          variant={mode === 'custom' ? 'default' : 'ghost'}
          size="sm"
          onClick={() => onModeChange('custom')}
          className="h-7 px-2 text-xs"
        >
          Custom
        </Button>
      </div>

      {/* Model Selector - compact */}
      <Select value={model} onValueChange={onModelChange}>
        <SelectTrigger className="h-7 w-[120px] text-xs">
          <SelectValue />
        </SelectTrigger>
        <SelectContent>{/* Model options */}</SelectContent>
      </Select>
    </div>
  );
}
```

---

## 10. –°–ª–µ–¥—É—é—â–∏–µ –®–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (—Å–µ–≥–æ–¥–Ω—è)
1. ‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å –∞—É–¥–∏—Ç (—ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç)
2. ‚è≠Ô∏è –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ UploadAudioDialog
3. ‚è≠Ô∏è –°–æ–∑–¥–∞—Ç—å GenerateFormHeaderCompact
4. ‚è≠Ô∏è –û–±–Ω–æ–≤–∏—Ç—å GenerateSheet —Å –Ω–æ–≤—ã–º layout

### –ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ
5. –°–æ–∑–¥–∞—Ç—å TrackModificationDialog
6. –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å Audio –¥–∏–∞–ª–æ–≥–∏
7. –î–æ–±–∞–≤–∏—Ç—å error/success states

### –ù–∞ —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–µ
8. Generic SelectionDialog
9. –°–æ–∑–¥–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã (styles, audio-utils, common types)
10. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
**–ê–≤—Ç–æ—Ä:** Claude Code
**–î–∞—Ç–∞:** 2025-12-13
