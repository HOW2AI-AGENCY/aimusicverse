# üé§ AI Lyrics Chat Assistant

–ß–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤ –ø–µ—Å–µ–Ω —Å –ø–æ–º–æ—â—å—é AI.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```mermaid
sequenceDiagram
    participant User
    participant Chat as LyricsChatAssistant
    participant Edge as ai-lyrics-assistant
    participant AI as Lovable AI (Gemini)
    
    User->>Chat: –ù–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥
    Chat->>User: –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Ç–µ–º—ã
    User->>Chat: –í—ã–±—Ä–∞—Ç—å –∂–∞–Ω—Ä/–Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ
    Chat->>Edge: –ó–∞–ø—Ä–æ—Å –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
    Edge->>AI: Prompt + context
    AI-->>Edge: Lyrics text
    Edge-->>Chat: Formatted lyrics
    Chat->>User: –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    User->>Chat: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫ —Ñ–æ—Ä–º–µ
```

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### Frontend

**`src/components/generate-form/lyrics-chat/LyricsChatAssistant.tsx`**
- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —á–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- Responsive: Drawer –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö, Dialog –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ
- Framer-motion –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π

**`src/hooks/useLyricsChat.ts`**
- –õ–æ–≥–∏–∫–∞ —á–∞—Ç–∞ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Edge Function
- –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞

### Backend

**`supabase/functions/ai-lyrics-assistant/index.ts`**
- Edge Function –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Lovable AI (Gemini 2.5 Flash)
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º—ã: generate, rewrite, improve, translate

## –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

### 1. Generate (–ì–µ–Ω–µ—Ä–∞—Ü–∏—è)
–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å –Ω—É–ª—è –Ω–∞ –æ—Å–Ω–æ–≤–µ:
- –¢–µ–º—ã/–∫–æ–Ω—Ü–µ–ø—Ü–∏–∏
- –ñ–∞–Ω—Ä–∞ –º—É–∑—ã–∫–∏
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
- –°—Ç—Ä—É–∫—Ç—É—Ä—ã (verse, chorus, bridge)

### 2. Rewrite (–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å)
–ü–æ–ª–Ω–æ–µ –ø–µ—Ä–µ–æ—Å–º—ã—Å–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ç–µ–∫—Å—Ç–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–º—ã—Å–ª–∞.

### 3. Improve (–£–ª—É—á—à–∏—Ç—å)
–£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ —Ç–µ–∫—Å—Ç–∞:
- –†–∏—Ñ–º—ã
- –†–∏—Ç–º
- –û–±—Ä–∞–∑–Ω–æ—Å—Ç—å

### 4. Translate (–ü–µ—Ä–µ–≤–µ—Å—Ç–∏)
–ü–µ—Ä–µ–≤–æ–¥ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º:
- –†–∏—Ç–º–∞ –∏ —Ä–∞–∑–º–µ—Ä–∞
- –†–∏—Ñ–º–æ–≤–∫–∏ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä–∞—Å–∞

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π

```typescript
// –í GenerateSheet –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è lyrics
const handleApplyLyrics = (lyrics: string) => {
  form.setValue('lyrics', lyrics);
  form.setValue('mode', 'custom'); // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ custom
  setIsLyricsChatOpen(false);
};
```

## –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –∫ API

```typescript
const response = await supabase.functions.invoke('ai-lyrics-assistant', {
  body: {
    action: 'generate',
    context: {
      theme: '–ª—é–±–æ–≤—å –∏ —Ä–∞—Å—Å—Ç–∞–≤–∞–Ω–∏–µ',
      genre: '–ø–æ–ø-–±–∞–ª–ª–∞–¥–∞',
      mood: '–≥—Ä—É—Å—Ç–Ω—ã–π, –º–µ–ª–∞–Ω—Ö–æ–ª–∏—á–Ω—ã–π',
      structure: 'verse-chorus-verse-chorus-bridge-chorus',
      language: '—Ä—É—Å—Å–∫–∏–π'
    }
  }
});
```

## UI/UX –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **Quick Options** - –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ–º—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞
2. **Genre Selector** - dropdown —Å –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ –∂–∞–Ω—Ä–∞–º–∏
3. **Mood Multi-select** - –≤—ã–±–æ—Ä –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π
4. **Structure Cards** - –≤–∏–∑—É–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
5. **Copy/Regenerate/Apply** - –¥–µ–π—Å—Ç–≤–∏—è —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
6. **Auto-scroll** - –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –Ω–æ–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏—è–º

## Best Practices

1. –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞—Ç—å —è–∑—ã–∫ —Ç–µ–∫—Å—Ç–∞
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —ç–º–æ—Ü–∏–∏ –≤–º–µ—Å—Ç–æ –æ–±—â–∏—Ö
3. –î–ª—è –ª—É—á—à–∏—Ö —Ä–∏—Ñ–º - —É–∫–∞–∑—ã–≤–∞—Ç—å —Ü–µ–ª–µ–≤–æ–π —è–∑—ã–∫ –≤ prompt
4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–º–æ–≥–∞–µ—Ç AI –ø–æ–Ω—è—Ç—å –æ–∂–∏–¥–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç
