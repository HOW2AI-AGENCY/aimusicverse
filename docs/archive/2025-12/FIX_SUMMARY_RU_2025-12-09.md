# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ useSyncExternalStore - 9 –¥–µ–∫–∞–±—Ä—è 2025

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ Telegram Mini App –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞:
```
vendor-other-CIhvNVqJ.js:10 Uncaught TypeError: Cannot read properties of undefined (reading 'useSyncExternalStore')
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –º–æ–≥–ª–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ TanStack Query –ø—ã—Ç–∞–ª–∞—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React —Ö—É–∫ –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ React –±—ã–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∂–µ–Ω.

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω—ã

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤**: 
   - `@tanstack/query-core` (—è–¥—Ä–æ) ‚Üí –ø–æ–ø–∞–¥–∞–ª –≤ `vendor-other` (500 –ö–ë)
   - `@tanstack/react-query` (React –±–∏–Ω–¥–∏–Ω–≥–∏) ‚Üí –ø–æ–ø–∞–¥–∞–ª –≤ `vendor-query` (3.2 –ö–ë)

2. **–¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å**:
   - `vendor-query` –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª —É—Ç–∏–ª–∏—Ç—ã –∏–∑ `vendor-other`
   - –û–±–µ —á–∞—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ `useSyncExternalStore` —Ö—É–∫
   - –ï—Å–ª–∏ `vendor-other` –∑–∞–≥—Ä—É–∂–∞–ª—Å—è –¥–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ React ‚Üí –æ—à–∏–±–∫–∞

3. **–ü–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏**:
   ```html
   1. vendor-react ‚úÖ
   2. vendor-utils ‚úÖ
   3. vendor-other ‚ö†Ô∏è (—Å–æ–¥–µ—Ä–∂–∏—Ç query-core —Å —Ö—É–∫–∞–º–∏)
   4. vendor-radix
   ...
   11. vendor-query ‚ö†Ô∏è (–∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏–∑ vendor-other)
   ```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

–û–±–Ω–æ–≤–ª–µ–Ω —Ñ–∞–π–ª `vite.config.ts` (—Å—Ç—Ä–æ–∫–∏ 118-121):

```typescript
// –ë–´–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
if (id.includes("@tanstack/react-query")) {
  return "vendor-query";
}

// –°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
// TanStack Query - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –≤–∫–ª—é—á–∞—Ç—å react-query –ò query-core
// –£—Ç–∏–ª–∏—Ç—ã query-core –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–º–µ—Å—Ç–µ —Å react-query –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
if (id.includes("@tanstack/react-query") || id.includes("@tanstack/query-core")) {
  return "vendor-query";
}
```

### –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. ‚úÖ **–ö–æ–ª–æ–∫–∞—Ü–∏—è**: –í–µ—Å—å –∫–æ–¥ TanStack Query —Ç–µ–ø–µ—Ä—å –≤ –æ–¥–Ω–æ–º —á–∞–Ω–∫–µ
2. ‚úÖ **–ù–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤**: `vendor-query` –±–æ–ª—å—à–µ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏–∑ `vendor-other`
3. ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫**: `vendor-query` –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –∏–∑ `vendor-react` (–∫–æ—Ç–æ—Ä—ã–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º)
4. ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: –ö–æ–≥–¥–∞ TanStack Query –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è, React —Ö—É–∫–∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –†–∞–∑–º–µ—Ä—ã —á–∞–Ω–∫–æ–≤

| –ß–∞–Ω–∫ | –î–æ | –ü–æ—Å–ª–µ | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|------|-----|-------|-----------|
| vendor-query | 3.2 –ö–ë | 43.32 –ö–ë | +40 –ö–ë ‚úÖ (—Ç–µ–ø–µ—Ä—å —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω) |
| vendor-other | 500.26 –ö–ë | 460.05 –ö–ë | -40 –ö–ë ‚úÖ (—É–±—Ä–∞–Ω query-core) |

### –ò–º–ø–æ—Ä—Ç—ã

**–î–æ (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):**
```javascript
// vendor-query –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª –∏–∑ vendor-other:
import {az as c, aA as l, ...} from "./vendor-other-CIhvNVqJ.js";
```

**–ü–æ—Å–ª–µ (–ü–†–ê–í–ò–õ–¨–ù–û):**
```javascript
// vendor-query –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –∏–∑ vendor-react:
from"./vendor-react-CSX_DmOJ.js"
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏

### –°–±–æ—Ä–∫–∞
```bash
npm run build
# ‚úì built in 30.91s
# –û—à–∏–±–æ–∫ –Ω–µ—Ç, –≤—Å–µ —á–∞–Ω–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚úÖ
```

### TypeScript
```bash
npx tsc --noEmit
# –û—à–∏–±–æ–∫ —Ç–∏–ø–æ–≤ –Ω–µ—Ç ‚úÖ
```

### Dev —Å–µ—Ä–≤–µ—Ä
```bash
npm run dev
# VITE v5.4.21 ready in 272 ms
# ‚ûú Local: http://localhost:8080/
# –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ ‚úÖ
```

### Code Review
- ‚úÖ –ü—Ä–æ—à–µ–ª –ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ–¥–∞
- 2 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –æ –¥–∞—Ç–∞—Ö (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (CodeQL)
- ‚úÖ 0 —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –Ω–∞–π–¥–µ–Ω–æ
- ‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–π–¥–µ–Ω—ã

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω–æ:
- ‚úÖ `TANSTACK_QUERY_CHUNKING_FIX.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
- ‚úÖ `FIX_SUMMARY_RU_2025-12-09.md` - –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ `vite.config.ts` —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–≠—Ç–æ **—á–µ—Ç–≤–µ—Ä—Ç–æ–µ** –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ —Å–µ—Ä–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å –ø–æ—Ä—è–¥–∫–æ–º –∑–∞–≥—Ä—É–∑–∫–∏ React –º–æ–¥—É–ª–µ–π:

1. ‚úÖ **REACT_LOADING_ORDER_FIX.md** - –ø–ª–∞–≥–∏–Ω reactPriorityPlugin –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ React
2. ‚úÖ **REACT_HOOKS_UNDEFINED_FIX.md** - –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ react-redux –∏ zustand –≤ vendor-react
3. ‚úÖ **REACT_HOOKS_MODULE_INIT_FIX.md** - –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ react-remove-scroll –≤ vendor-radix
4. ‚úÖ **TANSTACK_QUERY_CHUNKING_FIX.md** - —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–∫–æ–ª–æ–∫–∞—Ü–∏—è TanStack Query)

## üéì –î–ª—è –±—É–¥—É—â–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ü—Ä–∞–≤–∏–ª–æ –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ:

1. ‚ùì **–†–∞–∑–¥–µ–ª–µ–Ω–∞ –ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞–∫–µ—Ç–æ–≤?**
   - –ù–∞–ø—Ä–∏–º–µ—Ä: `@tanstack/react-query` + `@tanstack/query-core`
   - –ò–ª–∏: `@radix-ui/react-dialog` + `react-remove-scroll` + `use-callback-ref`

2. ‚ùì **–ò—Å–ø–æ–ª—å–∑—É—é—Ç –ª–∏ –æ–Ω–∏ React —Ö—É–∫–∏ –≤–æ –≤—Ä–µ–º—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–¥—É–ª—è?**
   - –ü—Ä–∏–∑–Ω–∞–∫–∏: –≤—ã–∑–æ–≤ —Ö—É–∫–æ–≤ –≤–Ω–µ —Ñ—É–Ω–∫—Ü–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - –ü–∞—Ç—Ç–µ—Ä–Ω: `const useSync = React.useLayoutEffect || React.useEffect`

3. ‚úÖ **–ï—Å–ª–∏ –¥–∞ ‚Üí –≤—Å–µ –ø–∞–∫–µ—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –æ–¥–Ω–æ–º —á–∞–Ω–∫–µ!**

### –®–∞–±–ª–æ–Ω –¥–ª—è vite.config.ts

```typescript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –≤–º–µ—Å—Ç–µ
if (id.includes("@library/react") || id.includes("@library/core")) {
  return "vendor-library";
}

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - —Å–æ–∑–¥–∞–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
if (id.includes("@library/react")) {
  return "vendor-library";
}
// @library/core –ø–æ–ø–∞–¥–µ—Ç –≤ vendor-other!
```

## üöÄ –°—Ç–∞—Ç—É—Å

- ‚úÖ **–ö–æ–¥**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- ‚úÖ **–°–±–æ—Ä–∫–∞**: –£—Å–ø–µ—à–Ω–∞
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∏**: –í—Å–µ –ø—Ä–æ–π–¥–µ–Ω—ã
- ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –°–æ–∑–¥–∞–Ω–∞
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –£—è–∑–≤–∏–º–æ—Å—Ç–µ–π –Ω–µ—Ç
- ‚è≥ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Telegram**: –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

---

**–ì–æ—Ç–æ–≤–æ –∫ —Å–ª–∏—è–Ω–∏—é –∏ –¥–µ–ø–ª–æ—é –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Telegram Mini App.**

**–î–∞—Ç–∞**: 9 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: P0 (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª–æ—Å—å)  
**–í–ª–∏—è–Ω–∏–µ**: –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω –¥–µ–ø–ª–æ—é
