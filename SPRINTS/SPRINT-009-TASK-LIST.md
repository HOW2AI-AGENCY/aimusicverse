# –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –¥–ª—è –°–ø—Ä–∏–Ω—Ç–∞ 009

**–°–ø—Ä–∏–Ω—Ç**: 009 - Track Details & Actions (User Stories 3 & 4)  
**–ü–µ—Ä–∏–æ–¥**: 2025-12-01 - 2025-12-04 (–∑–∞–≤–µ—Ä—à—ë–Ω –¥–æ—Å—Ä–æ—á–Ω–æ)  
**–¶–µ–ª—å**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞–Ω–µ–ª—å –¥–µ—Ç–∞–ª–µ–π —Ç—Ä–µ–∫–∞ —Å –ª–∏—Ä–∏–∫–æ–π, –≤–µ—Ä—Å–∏—è–º–∏, —Å—Ç–µ–º–∞–º–∏, AI-–∞–Ω–∞–ª–∏–∑–æ–º –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –º–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π

---

## üìä –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–ø—Ä–∏–Ω—Ç–∞

**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å**: 95% (18/19 –∑–∞–¥–∞—á)

- ‚úÖ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ**: 18 –∑–∞–¥–∞—á
- ‚è≥ **–û—Ç–ª–æ–∂–µ–Ω–æ**: 1 –∑–∞–¥–∞—á–∞ (–ø–ª–µ–π–ª–∏—Å—Ç—ã - —Ç—Ä–µ–±—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü)

---

## üéØ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (User Stories)

### User Story 3: Track Details Panel (P2) ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
**–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**, —è —Ö–æ—á—É –≤–∏–¥–µ—Ç—å –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç—Ä–µ–∫–µ —Å –ª–∏—Ä–∏–∫–æ–π, –≤–µ—Ä—Å–∏—è–º–∏, —Å—Ç–µ–º–∞–º–∏ –∏ AI-–∞–Ω–∞–ª–∏–∑–æ–º.

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏**:
1. ‚úÖ Details sheet –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏–∑ TrackCard/TrackRow
2. ‚úÖ 6 —Ç–∞–±–æ–≤: Details, Lyrics, Versions, Stems, Analysis, Changelog
3. ‚úÖ Normal –∏ timestamped –ª–∏—Ä–∏–∫–∞ —Å –∞–≤—Ç–æ-—Å–∫—Ä–æ–ª–ª–∏–Ω–≥–æ–º
4. ‚úÖ Version-aware –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å A/B –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º
5. ‚úÖ AI analysis —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π
6. ‚úÖ Smooth animations 60fps
7. ‚úÖ Lazy loading –¥–ª—è —Å—Ç–µ–º–æ–≤

### User Story 4: Track Actions Menu (P2) ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
**–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**, —è —Ö–æ—á—É —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Å —Ç—Ä–µ–∫–æ–º.

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏**:
1. ‚úÖ Create Artist (Persona) –∏–∑ —Ç—Ä–µ–∫–∞
2. ‚úÖ Open in Studio –¥–ª—è —Ç—Ä–µ–∫–æ–≤ —Å–æ —Å—Ç–µ–º–∞–º–∏
3. ‚úÖ Add to Project
4. ‚è≥ Add to Playlist (UI –≥–æ—Ç–æ–≤, —Ç–∞–±–ª–∏—Ü—ã –Ω–µ —Å–æ–∑–¥–∞–Ω—ã)
5. ‚úÖ Share track —Å –ø—É–±–ª–∏—á–Ω–æ–π —Å—Å—ã–ª–∫–æ–π
6. ‚úÖ Optimistic updates
7. ‚úÖ Haptic feedback
8. ‚úÖ Confirmation dialogs

---

## üìã –ó–∞–¥–∞—á–∏ User Story 3: Track Details Panel

### US3-T01: TrackDetailsSheet Component ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- **–§–∞–π–ª**: `src/components/TrackDetailSheet.tsx`
- Responsive bottom sheet —Å —Ç–∞–±–∞–º–∏
- Swipe down to close

### US3-T02: TrackDetailsTab Component ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- **–§–∞–π–ª**: `src/components/track-detail/TrackDetailsTab.tsx`
- Cover, title, style, tags, duration, badges

### US3-T03: LyricsView Component ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- **–§–∞–π–ª**: `src/components/lyrics/UnifiedLyricsView.tsx`
- Normal –∏ timestamped —Ä–µ–∂–∏–º—ã
- –ê–≤—Ç–æ-—Å–∫—Ä–æ–ª–ª —Å –ø–∞—É–∑–æ–π –ø—Ä–∏ —Ä—É—á–Ω–æ–º —Å–∫—Ä–æ–ª–ª–µ
- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

### US3-T04: VersionsTab Component ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- **–§–∞–π–ª**: `src/components/track/VersionsTab.tsx`
- –°–ø–∏—Å–æ–∫ –≤–µ—Ä—Å–∏–π A/B/C...
- Master version switching
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è is_primary + active_version_id

### US3-T05: StemsTab Component ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- **–§–∞–π–ª**: `src/components/track/StemsTab.tsx`
- –°–ø–∏—Å–æ–∫ —Å—Ç–µ–º–æ–≤
- Play/download actions

### US3-T06: AnalysisTab Component ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- **–§–∞–π–ª**: `src/components/track/AnalysisTab.tsx`
- AI analysis data display
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### US3-T07: ChangelogTab Component ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- **–§–∞–π–ª**: `src/components/track/ChangelogTab.tsx`
- –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ç—Ä–µ–∫–∞

---

## üìã –ó–∞–¥–∞—á–∏ User Story 4: Track Actions Menu

### US4-T01: CreateArtistDialog Component ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- **–§–∞–π–ª**: `src/components/CreateArtistDialog.tsx`
- –°–æ–∑–¥–∞–Ω–∏–µ AI –∞—Ä—Ç–∏—Å—Ç–∞ –∏–∑ —Ç—Ä–µ–∫–∞
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Ä—Ç—Ä–µ—Ç–∞

### US4-T02: OpenInStudio Action ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- **–§–∞–π–ª**: `src/components/TrackActionsMenu.tsx`
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –≤ /studio/{trackId}
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ has_stems > 0

### US4-T03: AddToProjectDialog ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- **–§–∞–π–ª**: `src/components/track-menu/AddToProjectDialog.tsx`
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–∞ –≤ –ø—Ä–æ–µ–∫—Ç

### US4-T04: ShareTrackDialog ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- **–§–∞–π–ª**: `src/components/track-menu/ShareTrackDialog.tsx`
- Telegram Stories, Share URL, Download

### US4-T05: PlaylistSelector ‚è≥ –û–¢–õ–û–ñ–ï–ù–û
- **–§–∞–π–ª**: `src/components/track-menu/PlaylistSelector.tsx`
- UI –≥–æ—Ç–æ–≤, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "coming soon"
- **–ë–ª–æ–∫–µ—Ä**: –¢–∞–±–ª–∏—Ü—ã playlists/playlist_tracks –Ω–µ —Å–æ–∑–¥–∞–Ω—ã

### US4-T06: ConfirmationDialog ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- **–§–∞–π–ª**: `src/components/ConfirmationDialog.tsx`
- Destructive actions confirmation

### US4-T07: Haptic Feedback Integration ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- **–§–∞–π–ª**: `src/lib/haptic.ts`, `src/lib/mobile-utils.ts`
- Vibration –Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è

### US4-T08: Optimistic Updates ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- React Query mutations —Å optimistic updates
- Rollback on error

---

## ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (2025-12-04)

–í —Ä–∞–º–∫–∞—Ö —Å–ø—Ä–∏–Ω—Ç–∞ —Ç–∞–∫–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

| –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|--------|----------|
| RLS Security Fix | ‚úÖ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø–æ–ª–∏—Ç–∏–∫–∏ profiles –∏ track_likes |
| Lyrics Auto-scroll | ‚úÖ | –î–æ–±–∞–≤–ª–µ–Ω isProgrammaticScrollRef –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞ |
| Telegram All Versions | ‚úÖ | –û—Ç–ø—Ä–∞–≤–∫–∞ –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π A/B –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö |
| suno-send-audio FormData | ‚úÖ | –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç—Ä–µ–∫–æ–≤ –≤ Telegram |
| Version Sync | ‚úÖ | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è is_primary + active_version_id |
| TODO/FIXME Cleanup | ‚úÖ | –ó–∞–∫—Ä—ã—Ç–æ 12 –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π |
| Telegram Like | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω toggle –ª–∞–π–∫–æ–≤ |
| Telegram Track Details | ‚úÖ | –ü–æ–∫–∞–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç—Ä–µ–∫–µ |

---

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏ —Å–ø—Ä–∏–Ω—Ç–∞ ‚úÖ –í–´–ü–û–õ–ù–ï–ù–´

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- [x] –í—Å–µ –∑–∞–¥–∞—á–∏ US3 (1-7) –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- [x] –ó–∞–¥–∞—á–∏ US4 (1-4, 6-8) –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- [x] TrackDetailsSheet —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ –≤—Å–µ–º–∏ —Ç–∞–±–∞–º–∏
- [x] Create Artist —Å–æ–∑–¥–∞–µ—Ç –∞—Ä—Ç–∏—Å—Ç–∞ –∏–∑ —Ç—Ä–µ–∫–∞
- [x] Open in Studio –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å—Ç–µ–º–æ–≤
- [x] Add to Project –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç—Ä–µ–∫
- [ ] Add to Playlist (–æ—Ç–ª–æ–∂–µ–Ω–æ - –Ω—É–∂–Ω—ã —Ç–∞–±–ª–∏—Ü—ã)
- [x] Share Track —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
- [x] TypeScript: 0 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- [x] ESLint: –æ—Å–Ω–æ–≤–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- [x] Security: RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã

### Performance
- [x] Details sheet –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è <500ms
- [x] –í–µ—Ä—Å–∏–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è <300ms
- [x] Smooth animations

---

## üîÑ –°–ª–µ–¥—É—é—â–∏–π —Å–ø—Ä–∏–Ω—Ç

**Sprint 010: Homepage Discovery & AI Assistant (User Stories 5 & 6)**
- –ü–µ—Ä–∏–æ–¥: –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è
- –ó–∞–¥–∞—á–∏: Homepage —Å –ø—É–±–ª–∏—á–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º –∏ AI Assistant —Ä–µ–∂–∏–º

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2025-12-04*
