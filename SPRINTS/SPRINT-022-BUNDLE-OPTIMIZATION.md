# Sprint 022: Bundle Optimization & Performance

**–°–ø—Ä–∏–Ω—Ç**: 022 - Bundle Size Optimization  
**–ü–µ—Ä–∏–æ–¥**: 2025-12-09  
**–°—Ç–∞—Ç—É—Å**: üîÑ –í –ü–†–û–ì–†–ï–°–°–ï  
**–¶–µ–ª—å**: –£–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞ —Å 1.16MB –¥–æ <800KB

---

## üìä –¢–µ–∫—É—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –¶–µ–ª—å | –°—Ç–∞—Ç—É—Å |
|---------|-----|------|--------|
| Bundle size | 1.16 MB | <800 KB | üîÑ |
| Vendor chunks | 12 | –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å | ‚úÖ |
| Tree-shaking | –ë–∞–∑–æ–≤—ã–π | –£–ª—É—á—à–µ–Ω–Ω—ã–π | ‚úÖ |
| Code splitting | –°—Ç—Ä–∞–Ω–∏—Ü—ã | + –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã | ‚úÖ |

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### OPT-001: –£–ª—É—á—à–µ–Ω–∏–µ Tree-shaking ‚úÖ
- –û–±–Ω–æ–≤–ª–µ–Ω target —Å `es2015` –Ω–∞ `esnext`
- –í–∫–ª—é—á–µ–Ω `treeshake.preset: "recommended"`
- –î–æ–±–∞–≤–ª–µ–Ω `moduleSideEffects: false`
- –£–≤–µ–ª–∏—á–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ö–æ–¥–æ–≤ terser –¥–æ 2

### OPT-002: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è framer-motion ‚úÖ
- –°–æ–∑–¥–∞–Ω `src/lib/motion.ts` —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞–º–∏
- –î–æ–±–∞–≤–ª–µ–Ω—ã –≥–æ—Ç–æ–≤—ã–µ animation presets (fadeIn, slideUp, scaleIn)
- –î–æ–±–∞–≤–ª–µ–Ω—ã transition presets –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

### OPT-003: Lazy Loading –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ ‚úÖ
- –°–æ–∑–¥–∞–Ω `src/components/lazy/index.ts`
- –î–æ–±–∞–≤–ª–µ–Ω—ã lazy-–≤–µ—Ä—Å–∏–∏ —Ç—è–∂—ë–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
  - UploadAudioDialog
  - GenerateSheet
  - LyricsChatAssistant
  - TrackDetailSheet
  - AudioVisualizer
  - MusicGraph
  - OnboardingSlider
  - TrackAnalytics

### OPT-004: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è vendor chunks ‚úÖ
- –†–∞–∑–¥–µ–ª–µ–Ω date-fns –Ω–∞ core –∏ locale
- –£–ª—É—á—à–µ–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

---

## üìã –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### OPT-005: –ó–∞–º–µ–Ω–∞ –∏–º–ø–æ—Ä—Ç–æ–≤ framer-motion
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å –ø—Ä—è–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã –Ω–∞ `@/lib/motion`
- [ ] –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏
- [ ] –û—Ü–µ–Ω–∫–∞: 5 SP

### OPT-006: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è lucide-react
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã –≤–º–µ—Å—Ç–æ barrel
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π icon bundle
- [ ] –û—Ü–µ–Ω–∫–∞: 3 SP

### OPT-007: –ê–Ω–∞–ª–∏–∑ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –º—ë—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å bundle analyzer
- [ ] –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- [ ] –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã
- [ ] –û—Ü–µ–Ω–∫–∞: 5 SP

### OPT-008: Image optimization
- [ ] –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ WebP
- [ ] –î–æ–±–∞–≤–∏—Ç—å lazy loading –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- [ ] –û—Ü–µ–Ω–∫–∞: 3 SP

---

## üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. `vite.config.ts` - –£–ª—É—á—à–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏
2. `src/lib/motion.ts` - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç—ã framer-motion (NEW)
3. `src/components/lazy/index.ts` - Lazy-loaded –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (NEW)

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü—Ä–æ–≤–µ—Å—Ç–∏ bundle analysis –ø–æ—Å–ª–µ —Ç–µ–∫—É—â–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. –ó–∞–º–µ–Ω–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã framer-motion –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
3. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∫–æ–Ω–∫–∏ lucide-react
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞

---

*–°–æ–∑–¥–∞–Ω–æ: 2025-12-09*
