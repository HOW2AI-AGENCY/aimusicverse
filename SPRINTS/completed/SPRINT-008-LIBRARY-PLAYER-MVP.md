# –°–ø—Ä–∏–Ω—Ç 008: MVP - Library & Player (User Stories 1 & 2)

- **–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 2025-12-15 - 2025-12-29 (2 –Ω–µ–¥–µ–ª–∏)
- **–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Å —Å–∏—Å—Ç–µ–º–æ–π –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–µ–µ—Ä —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –æ—á–µ—Ä–µ–¥—å—é. –≠—Ç–æ MVP –¥–ª—è mobile-first –ø–æ–¥—Ö–æ–¥–∞.

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

–≠—Ç–æ—Ç —Å–ø—Ä–∏–Ω—Ç –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç **User Story 1 (Library Mobile Redesign & Versioning)** –∏ **User Story 2 (Player Mobile Optimization)** –∏–∑ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø–ª–∞–Ω–∞. –û–±–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç **P1** –∏ —è–≤–ª—è—é—Ç—Å—è —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–æ–º –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞.

### User Story 1: Library Mobile Redesign & Versioning
**–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞**, —è —Ö–æ—á—É –≤–∏–¥–µ—Ç—å –∫–æ–º–ø–∞–∫—Ç–Ω—É—é, —É–¥–æ–±–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤–µ—Ä—Å–∏–π —Ç—Ä–µ–∫–æ–≤, —á—Ç–æ–±—ã —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–µ–π –º—É–∑—ã–∫–æ–π –æ–¥–Ω–æ–π —Ä—É–∫–æ–π.

### User Story 2: Player Mobile Optimization
**–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞**, —è —Ö–æ—á—É –∏–º–µ—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–ª–µ–µ—Ä —Å —Ç—Ä–µ–º—è —Ä–µ–∂–∏–º–∞–º–∏ (–∫–æ–º–ø–∞–∫—Ç–Ω—ã–π/—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π/–ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π), —á—Ç–æ–±—ã —Å–ª—É—à–∞—Ç—å –º—É–∑—ã–∫—É –±–µ–∑ –æ—Ç—Ä—ã–≤–∞ –æ—Ç –¥—Ä—É–≥–∏—Ö –∑–∞–¥–∞—á.

## –ó–∞–¥–∞—á–∏ User Story 1: Library (10 –∑–∞–¥–∞—á)

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

| ID | –ù–∞–∑–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –§–∞–π–ª | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π |
|---|---|---|---|---|
| US1-T01 | **TrackCard Mobile Redesign** - –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å TrackCard –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö: touch targets ‚â•44px, swipe gestures, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è layout | To Do | `src/components/TrackCard.tsx` | Frontend |
| US1-T02 | **TrackRow Component** - –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Å—Ç—Ä–æ—á–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ list —Ä–µ–∂–∏–º–µ | To Do | `src/components/TrackRow.tsx` | Frontend |
| US1-T03 | **VersionBadge Component** - –ë–µ–π–¥–∂ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –≤–µ—Ä—Å–∏–π –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä master –≤–µ—Ä—Å–∏–∏ | To Do | `src/components/VersionBadge.tsx` | Frontend |
| US1-T04 | **VersionSwitcher Component** - UI –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏ —Ç—Ä–µ–∫–∞ | To Do | `src/components/VersionSwitcher.tsx` | Frontend |
| US1-T05 | **TrackTypeIcons Component** - –ò–∫–æ–Ω–∫–∏ –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª–∞, –≤–æ–∫–∞–ª–∞, —Å—Ç–µ–º–æ–≤ | To Do | `src/components/TrackTypeIcons.tsx` | Frontend |
| US1-T06 | **Library Page Update** - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, backend —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, lazy loading | To Do | `src/pages/Library.tsx` | Frontend |
| US1-T07 | **Swipe Actions** - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å swipe-to-like, swipe-to-delete, haptic feedback | To Do | `src/components/TrackCard.tsx` | Frontend |
| US1-T08 | **Skeleton Loaders** - –°–∫–µ–ª–µ—Ç–æ–Ω—ã –¥–ª—è TrackCard –∏ TrackRow | To Do | `src/components/ui/skeleton-loader.tsx` | Frontend |
| US1-T09 | **Library Tests** - Unit –∏ integration —Ç–µ—Å—Ç—ã –¥–ª—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è | To Do | `src/pages/Library.test.tsx` | QA |
| US1-T10 | **Library Mobile E2E** - E2E —Ç–µ—Å—Ç—ã —Å Playwright –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º viewport | To Do | `tests/e2e/library.spec.ts` | QA |

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏ US1
- [ ] TrackCard –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è—Ö 320px-1920px
- [ ] Touch targets –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ ‚â•44√ó44px
- [ ] Swipe gestures —Ä–∞–±–æ—Ç–∞—é—Ç —Å haptic feedback (iOS/Android)
- [ ] –í–µ—Ä—Å–∏–∏ —Ç—Ä–µ–∫–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å –±–µ–π–¥–∂–∞–º–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
- [ ] Master –≤–µ—Ä—Å–∏—è –ø–æ–º–µ—á–µ–Ω–∞ –≤–∏–∑—É–∞–ª—å–Ω–æ, –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –Ω–µ–π
- [ ] List/Grid —Ä–µ–∂–∏–º—ã –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è –ø–ª–∞–≤–Ω–æ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
- [ ] Lazy loading —Ä–∞–±–æ—Ç–∞–µ—Ç, —Å–∫–µ–ª–µ—Ç–æ–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- [ ] Performance: Lighthouse Mobile Score >90, FCP <2s –Ω–∞ 3G
- [ ] Accessibility: WCAG 2.1 AA, –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–º–µ—é—Ç ARIA labels

## –ó–∞–¥–∞—á–∏ User Story 2: Player (12 –∑–∞–¥–∞—á)

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–ª–µ–µ—Ä–∞

| ID | –ù–∞–∑–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –§–∞–π–ª | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π |
|---|---|---|---|---|
| US2-T01 | **CompactPlayer Redesign** - –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –ø–ª–µ–µ—Ä (cover, title, play/pause) –≤—ã—Å–æ—Ç–æ–π 64px | To Do | `src/components/CompactPlayer.tsx` | Frontend |
| US2-T02 | **ExpandedPlayer Component** - –°—Ä–µ–¥–Ω–∏–π —Ä–µ–∂–∏–º: cover, progress, basic controls (200px) | To Do | `src/components/ExpandedPlayer.tsx` | Frontend |
| US2-T03 | **FullscreenPlayer Redesign** - –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–∏—Ä–∏–∫–∞, waveform, –≤—Å–µ –∫–æ–Ω—Ç—Ä–æ–ª—ã | To Do | `src/components/FullscreenPlayer.tsx` | Frontend |
| US2-T04 | **PlaybackControls Component** - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª—ã: play/pause, skip, shuffle, repeat | To Do | `src/components/player/PlaybackControls.tsx` | Frontend |
| US2-T05 | **ProgressBar Component** - –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä —Å seek, buffering indicator, touch-friendly | To Do | `src/components/player/ProgressBar.tsx` | Frontend |
| US2-T06 | **QueueSheet Component** - Bottom sheet —Å –æ—á–µ—Ä–µ–¥—å—é –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è (drag-to-reorder) | To Do | `src/components/player/QueueSheet.tsx` | Frontend |
| US2-T07 | **QueueItem Component** - –≠–ª–µ–º–µ–Ω—Ç –æ—á–µ—Ä–µ–¥–∏ —Å drag handle –∏ swipe-to-remove | To Do | `src/components/player/QueueItem.tsx` | Frontend |
| US2-T08 | **TimestampedLyrics Update** - –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –∏ –≤–∏–¥–∏–º–æ—Å—Ç—å –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö | To Do | `src/components/TimestampedLyrics.tsx` | Frontend |
| US2-T09 | **Player State Management** - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è usePlayerState, usePlaybackQueue —Ö—É–∫–æ–≤ | To Do | `src/hooks/usePlayerState.ts` | Frontend |
| US2-T10 | **Player Transitions** - –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏ –ø–ª–µ–µ—Ä–∞ —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏ | To Do | `src/components/player/` | Frontend |
| US2-T11 | **Player Tests** - Unit —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø–ª–µ–µ—Ä–∞ | To Do | `src/components/player/*.test.tsx` | QA |
| US2-T12 | **Player Mobile E2E** - E2E —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ –ø–ª–µ–µ—Ä–∞ –∏ –æ—á–µ—Ä–µ–¥–∏ | To Do | `tests/e2e/player.spec.ts` | QA |

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏ US2
- [ ] CompactPlayer –∑–∞–Ω–∏–º–∞–µ—Ç 64px –∏ –Ω–µ –º–µ—à–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç—É
- [ ] ExpandedPlayer –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–≤–∞–π–ø–æ–º –≤–≤–µ—Ä—Ö, –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–≤–∞–π–ø–æ–º –≤–Ω–∏–∑
- [ ] FullscreenPlayer –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ª–∏—Ä–∏–∫—É (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞)
- [ ] –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –∫–∞—Å–∞–Ω–∏–µ, –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç buffering
- [ ] QueueSheet –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç drag-to-reorder –∏ swipe-to-remove
- [ ] Shuffle –∏ repeat —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] Background audio (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π)
- [ ] Performance: Smooth animations 60fps, –∞—É–¥–∏–æ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è
- [ ] Accessibility: Keyboard navigation, screen reader support

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### Mobile-First CSS
```css
/* Touch targets –º–∏–Ω–∏–º—É–º 44√ó44px */
.touch-target {
  min-width: 44px;
  min-height: 44px;
}

/* Breakpoints */
@media (max-width: 640px) { /* mobile */ }
@media (min-width: 641px) and (max-width: 1024px) { /* tablet */ }
@media (min-width: 1025px) { /* desktop */ }
```

### Gesture Support
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `framer-motion` –¥–ª—è swipe gestures
- Haptic feedback —á–µ—Ä–µ–∑ `@twa-dev/sdk` –¥–ª—è Telegram Mini Apps
- Touch event handlers —Å passive –¥–ª—è scroll performance

### Performance
- Lazy loading –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å placeholder
- Virtual scrolling –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤ (react-window)
- Debounce –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- Memoization –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (React.memo)

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏ —Å–ø—Ä–∏–Ω—Ç–∞

- [ ] –í—Å–µ –∑–∞–¥–∞—á–∏ US1 –∏ US2 –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- [ ] Code review –ø—Ä–æ–π–¥–µ–Ω
- [ ] Unit —Ç–µ—Å—Ç—ã: –ø–æ–∫—Ä—ã—Ç–∏–µ >80%
- [ ] E2E —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –Ω–∞ mobile viewport (375√ó667, 390√ó844)
- [ ] Performance: Lighthouse Mobile >90
- [ ] Accessibility: WCAG 2.1 AA
- [ ] –í–∏–∑—É–∞–ª—å–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è: –°–∫—Ä–∏–Ω—à–æ—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ Storybook
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- ‚úÖ Sprint 007 –∑–∞–≤–µ—Ä—à–µ–Ω (–º–∏–≥—Ä–∞—Ü–∏–∏, —Ç–∏–ø—ã, —Ö—É–∫–∏)
- ‚è≥ Design assets –¥–ª—è –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚è≥ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (—Ç—Ä–µ–∫–∏ —Å –≤–µ—Ä—Å–∏—è–º–∏)

## –†–∏—Å–∫–∏

- **–°–ª–æ–∂–Ω–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–π:** Framer Motion –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω—ã–º. –†–µ—à–µ–Ω–∏–µ: –Ω–∞—á–∞—Ç—å —Å –ø—Ä–æ—Å—Ç—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π
- **Performance –Ω–∞ —Å—Ç–∞—Ä—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö:** –ú–æ–≥—É—Ç –±—ã—Ç—å –ª–∞–≥–∏. –†–µ—à–µ–Ω–∏–µ: Profiling, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- **Gesture conflicts:** Swipe –º–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å–æ scroll. –†–µ—à–µ–Ω–∏–µ: Threshold –∏ direction detection

## –°–ª–µ–¥—É—é—â–∏–π —Å–ø—Ä–∏–Ω—Ç

**Sprint 009: Track Details & Actions (User Stories 3 & 4)**
- –ü–∞–Ω–µ–ª—å –¥–µ—Ç–∞–ª–µ–π —Ç—Ä–µ–∫–∞ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –ª–∏—Ä–∏–∫–∏
- –ú–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π —Å –Ω–æ–≤—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ (Create Persona, Open in Studio)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç—ã/–ø–ª–µ–π–ª–∏—Å—Ç—ã

## –°—Å—ã–ª–∫–∏

- üìÑ –î–µ—Ç–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏: `specs/copilot/audit-interface-and-optimize/tasks.md` (T025-T046)
- üé® Design mockups: `docs/design/library-player-mvp/`
- üß™ Test plan: `specs/copilot/audit-interface-and-optimize/test-plan.md`
