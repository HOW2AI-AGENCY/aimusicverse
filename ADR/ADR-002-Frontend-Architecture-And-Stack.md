# ADR-002: Утверждение архитектуры и технологического стека фронтенда

- **Статус:** Принято
- **Дата:** 2025-11-30

## Контекст

После начальной фазы разработки и исправления критической ошибки "белого экрана" (коммит `f56d527`), проект стабилизировался на определённом технологическом стеке и архитектуре. Этот документ фиксирует текущее состояние, чтобы обеспечить единое понимание и согласованность в дальнейшей разработке.

## Решение

Мы официально утверждаем следующий технологический стек и архитектурные принципы для фронтенд-приложения MusicVerse AI:

### 1. Фреймворк и сборка
- **Фреймворк:** React 19 (с использованием хуков и функциональных компонентов).
- **Сборщик:** Vite — для быстрой разработки и сборки.
- **Язык:** TypeScript — для строгой типизации и улучшения качества кода.

### 2. Управление состоянием
- **Локальное состояние:** Стандартные хуки React (`useState`, `useReducer`, `useContext`).
- **Серверное состояние:** `TanStack Query` (React Query) — для кэширования, синхронизации и обновления данных с бэкенда.

### 3. Стилизация
- **CSS-фреймворк:** Tailwind CSS — для быстрой и консистентной вёрстки.
- **UI-компоненты:** `shadcn/ui` — как основа для построения кастомных, доступных и стилизованных компонентов.

### 4. Роутинг
- **Библиотека:** `React Router` — для навигации внутри Telegram Mini App.

### 5. Бэкенд-интеграция
- **API-клиент:** `Supabase Client` — для взаимодействия с базой данных и Edge-функциями.
- **Принцип:** Вся бизнес-логика, требующая секретных ключей (например, работа с Suno AI API), выносится в Supabase Edge Functions. Клиентское приложение взаимодействует только с безопасным API, предоставляемым Supabase.

### 6. Тестирование
- **Фреймворк:** Jest — для модульного и интеграционного тестирования.
- **Утилиты:** `React Testing Library` — для тестирования компонентов с точки зрения пользователя.

## Последствия

- **Положительные:**
  - **Стандартизация:** Вся команда работает с единым, чётко определённым стеком.
  - **Скорость разработки:** Используемые инструменты (Vite, Tailwind) значительно ускоряют процесс разработки.
  - **Качество кода:** TypeScript и Jest помогают поддерживать код в рабочем и надёжном состоянии.
- **Отрицательные:**
  - **Порог входа:** Новым разработчикам может потребоваться время на изучение всего стека (Vite, Supabase, TanStack Query).
- **Дальнейшие шаги:**
  - Вся новая разработка должна соответствовать этому ADR.
  - Любые предложения по изменению стека должны обсуждаться и фиксироваться в новых ADR.
